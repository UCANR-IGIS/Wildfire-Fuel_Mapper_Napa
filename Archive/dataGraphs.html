<!DOCTYPE html>
<html>

    <head>
        <!-- Site made with Mobirise Website Builder v3.12.1, https://mobirise.com -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="generator" content="Mobirise v3.12.1, mobirise.com">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="assets/images/logo.png" type="image/x-icon">
        <meta name="description" content="">

        <title>California Land Use and Ownership Portal</title>




        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,400&amp;subset=cyrillic,latin,greek,vietnamese">
        <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-sortable.css">
        <link rel="stylesheet" href="assets/animate.css/animate.min.css">
        <link rel="stylesheet" href="assets/mobirise/css/style.css">
        <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
        <link rel="stylesheet" href="https://js.arcgis.com/4.5/esri/css/main.css">
        <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.alpha.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/introjs.min.css">

        <style>
            html,
            body,
            #data{
                padding: 0
            }
            body{
                background-color: rgb(70, 70, 70)
            }
            #sidebar {
                background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54.627 0l.83.828-1.415 1.415L51.8 0h2.827zM5.373 0l-.83.828L5.96 2.243 8.2 0H5.374zM48.97 0l3.657 3.657-1.414 1.414L46.143 0h2.828zM11.03 0L7.372 3.657 8.787 5.07 13.857 0H11.03zm32.284 0L49.8 6.485 48.384 7.9l-7.9-7.9h2.83zM16.686 0L10.2 6.485 11.616 7.9l7.9-7.9h-2.83zm20.97 0l9.315 9.314-1.414 1.414L34.828 0h2.83zM22.344 0L13.03 9.314l1.414 1.414L25.172 0h-2.83zM32 0l12.142 12.142-1.414 1.414L30 .828 17.272 13.556l-1.414-1.414L28 0h4zM.284 0l28 28-1.414 1.414L0 2.544V0h.284zM0 5.373l25.456 25.455-1.414 1.415L0 8.2V5.374zm0 5.656l22.627 22.627-1.414 1.414L0 13.86v-2.83zm0 5.656l19.8 19.8-1.415 1.413L0 19.514v-2.83zm0 5.657l16.97 16.97-1.414 1.415L0 25.172v-2.83zM0 28l14.142 14.142-1.414 1.414L0 30.828V28zm0 5.657L11.314 44.97 9.9 46.386l-9.9-9.9v-2.828zm0 5.657L8.485 47.8 7.07 49.212 0 42.143v-2.83zm0 5.657l5.657 5.657-1.414 1.415L0 47.8v-2.83zm0 5.657l2.828 2.83-1.414 1.413L0 53.456v-2.83zM54.627 60L30 35.373 5.373 60H8.2L30 38.2 51.8 60h2.827zm-5.656 0L30 41.03 11.03 60h2.828L30 43.858 46.142 60h2.83zm-5.656 0L30 46.686 16.686 60h2.83L30 49.515 40.485 60h2.83zm-5.657 0L30 52.343 22.343 60h2.83L30 55.172 34.828 60h2.83zM32 60l-2-2-2 2h4zM59.716 0l-28 28 1.414 1.414L60 2.544V0h-.284zM60 5.373L34.544 30.828l1.414 1.415L60 8.2V5.374zm0 5.656L37.373 33.656l1.414 1.414L60 13.86v-2.83zm0 5.656l-19.8 19.8 1.415 1.413L60 19.514v-2.83zm0 5.657l-16.97 16.97 1.414 1.415L60 25.172v-2.83zM60 28L45.858 42.142l1.414 1.414L60 30.828V28zm0 5.657L48.686 44.97l1.415 1.415 9.9-9.9v-2.828zm0 5.657L51.515 47.8l1.414 1.413 7.07-7.07v-2.83zm0 5.657l-5.657 5.657 1.414 1.415L60 47.8v-2.83zm0 5.657l-2.828 2.83 1.414 1.413L60 53.456v-2.83zM39.9 16.385l1.414-1.414L30 3.658 18.686 14.97l1.415 1.415 9.9-9.9 9.9 9.9zm-2.83 2.828l1.415-1.414L30 9.313 21.515 17.8l1.414 1.413 7.07-7.07 7.07 7.07zm-2.827 2.83l1.414-1.416L30 14.97l-5.657 5.657 1.414 1.415L30 17.8l4.243 4.242zm-2.83 2.827l1.415-1.414L30 20.626l-2.828 2.83 1.414 1.414L30 23.456l1.414 1.414zM56.87 59.414L58.284 58 30 29.716 1.716 58l1.414 1.414L30 32.544l26.87 26.87z' fill='%23a3aba2' fill-opacity='0.19' fill-rule='evenodd'/%3E%3C/svg%3E")
            }

            #sidebarGap {
                background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54.627 0l.83.828-1.415 1.415L51.8 0h2.827zM5.373 0l-.83.828L5.96 2.243 8.2 0H5.374zM48.97 0l3.657 3.657-1.414 1.414L46.143 0h2.828zM11.03 0L7.372 3.657 8.787 5.07 13.857 0H11.03zm32.284 0L49.8 6.485 48.384 7.9l-7.9-7.9h2.83zM16.686 0L10.2 6.485 11.616 7.9l7.9-7.9h-2.83zm20.97 0l9.315 9.314-1.414 1.414L34.828 0h2.83zM22.344 0L13.03 9.314l1.414 1.414L25.172 0h-2.83zM32 0l12.142 12.142-1.414 1.414L30 .828 17.272 13.556l-1.414-1.414L28 0h4zM.284 0l28 28-1.414 1.414L0 2.544V0h.284zM0 5.373l25.456 25.455-1.414 1.415L0 8.2V5.374zm0 5.656l22.627 22.627-1.414 1.414L0 13.86v-2.83zm0 5.656l19.8 19.8-1.415 1.413L0 19.514v-2.83zm0 5.657l16.97 16.97-1.414 1.415L0 25.172v-2.83zM0 28l14.142 14.142-1.414 1.414L0 30.828V28zm0 5.657L11.314 44.97 9.9 46.386l-9.9-9.9v-2.828zm0 5.657L8.485 47.8 7.07 49.212 0 42.143v-2.83zm0 5.657l5.657 5.657-1.414 1.415L0 47.8v-2.83zm0 5.657l2.828 2.83-1.414 1.413L0 53.456v-2.83zM54.627 60L30 35.373 5.373 60H8.2L30 38.2 51.8 60h2.827zm-5.656 0L30 41.03 11.03 60h2.828L30 43.858 46.142 60h2.83zm-5.656 0L30 46.686 16.686 60h2.83L30 49.515 40.485 60h2.83zm-5.657 0L30 52.343 22.343 60h2.83L30 55.172 34.828 60h2.83zM32 60l-2-2-2 2h4zM59.716 0l-28 28 1.414 1.414L60 2.544V0h-.284zM60 5.373L34.544 30.828l1.414 1.415L60 8.2V5.374zm0 5.656L37.373 33.656l1.414 1.414L60 13.86v-2.83zm0 5.656l-19.8 19.8 1.415 1.413L60 19.514v-2.83zm0 5.657l-16.97 16.97 1.414 1.415L60 25.172v-2.83zM60 28L45.858 42.142l1.414 1.414L60 30.828V28zm0 5.657L48.686 44.97l1.415 1.415 9.9-9.9v-2.828zm0 5.657L51.515 47.8l1.414 1.413 7.07-7.07v-2.83zm0 5.657l-5.657 5.657 1.414 1.415L60 47.8v-2.83zm0 5.657l-2.828 2.83 1.414 1.413L60 53.456v-2.83zM39.9 16.385l1.414-1.414L30 3.658 18.686 14.97l1.415 1.415 9.9-9.9 9.9 9.9zm-2.83 2.828l1.415-1.414L30 9.313 21.515 17.8l1.414 1.413 7.07-7.07 7.07 7.07zm-2.827 2.83l1.414-1.416L30 14.97l-5.657 5.657 1.414 1.415L30 17.8l4.243 4.242zm-2.83 2.827l1.415-1.414L30 20.626l-2.828 2.83 1.414 1.414L30 23.456l1.414 1.414zM56.87 59.414L58.284 58 30 29.716 1.716 58l1.414 1.414L30 32.544l26.87 26.87z' fill='%23a3aba2' fill-opacity='0.19' fill-rule='evenodd'/%3E%3C/svg%3E")
            }

            .esri-legend {
                display: none;
            }

            .esri-layer-list {
                display: block;
            }

            ul {
                list-style-type: none;
                padding: 0;
            }

            li.key {
                float: left;
                border-top-width: 15px;
                border-top-style: solid;
                width: 10%;
                padding-left: 0;
                padding-right: 0;
                list-style: none;
            }

            h1,
            h2 {
                letter-spacing: 2px;
            }

            .btn{
                font-size: 1.25rem;
                padding: 5px
            }

            .btn-default {
                color: white;
                background-color: #8d595e;
            }

            .btn-default:hover {
                color: white;
                background-color: #b08286;
            }

            .btn-default:active {
                color: white;
                background-color: #8d595e;
            }

            .nopadding {
                padding: 0 !important;
                margin: 0 !important;
            }

            .mbr-section__container{
                width: 100%;
            }

            .navbar-map {
                border-top-width: 0px;
                border-bottom-width: 1px;
                min-height: 0px;
            }

            .panel-default > .panel-heading{
                background-color: white;
                border-color: white;
            }

            .loader,
            .loader:after {
                border-radius: 50%;
                width: 10em;
                height: 10em;
            }
            .loader {
                margin: 60px auto;
                font-size: 10px;
                position: relative;
                top: 45%;
                left: 1%;
                text-indent: -9999em;
                border-top: 1.1em solid rgba(255, 255, 255, 0.2);
                border-right: 1.1em solid rgba(255, 255, 255, 0.2);
                border-bottom: 1.1em solid rgba(255, 255, 255, 0.2);
                border-left: 1.1em solid #ffffff;
                -webkit-transform: translateZ(0);
                -ms-transform: translateZ(0);
                transform: translateZ(0);
                -webkit-animation: load8 1.1s infinite linear;
                animation: load8 1.1s infinite linear;
            }
            @-webkit-keyframes load8 {
                0% {
                    -webkit-transform: rotate(0deg);
                    transform: rotate(0deg);
                }
                100% {
                    -webkit-transform: rotate(360deg);
                    transform: rotate(360deg);
                }
            }
            @keyframes load8 {
                0% {
                    -webkit-transform: rotate(0deg);
                    transform: rotate(0deg);
                }
                100% {
                    -webkit-transform: rotate(360deg);
                    transform: rotate(360deg);
                }
            }

            #loadingDiv {
                position:absolute;;
                top:0;
                left:0;
                width:100%;
                height:100%;
                background-color:#000;
                z-index: 10;
            }

            #graphToggle{
                margin: 0;
                margin-left: 0;
                margin-right: 0;
                padding-left: 0;
                padding-right: 0;
                padding-top: 5px;
                padding-bottom: 5px;
                background-color: rgb(44, 44, 44);
            }

            .row {
                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;
                -webkit-flex-wrap: wrap;
                -ms-flex-wrap: wrap;
                flex-wrap: wrap;
            }

            .card mb-2 {
                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;
                margin-bottom: 0px!important
            }

            .col-md-4 {
                padding-left: 0px;
                padding-right: 0px;
            }

            .col-md-pull-5 {
                padding-left: 0px;
                padding-right: 0px;
            }

            .col-md-push-7 {
                padding-left: 0px;
                padding-right: 0px;
            }

            .col-md-pull-7 {
                padding-left: 0px;
                padding-right: 0px;
            }

            .col-md-push-5 {
                padding-left: 0px;
                padding-right: 0px;
            }

            .col-md-7 {
                padding-left: 0px;
                padding-right: 0px;
            }

            .col-md-12 {
                padding-left: 0px;
                padding-right: 0px;
                margin-bottom: 0px!important
            }

            .card-header{
                background-color: #8d595e;
                color: white;
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }
            .card-header:first-child{
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }
            .card-footer{
                background-color: white;
                color: grey
            }

            .card-block{
                padding: 0
            }

            .card{
                border: 0
            }

            .table{
                margin-bottom: 0px
            }

            .fa-chevron-down{
                color: white
            }

            .countyLabel{
                font-size: 2em;
                font-weight: 500
            }

            .panel{
                margin-bottom: 0px;
                border-bottom-width: 0px;
                border-top-width: 0px;
                border-left-width: 0px;
                border-right-width: 0px;
            }

            .mb-2{
                margin-bottom: 0px!important;
            }

            .navbar-light .navbar-toggler{
                margin-top: 5px;
                border-color:rgba(255,255,255,1)
            }
            .navbar-light .navbar-toggler-icon{
                background-image:url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(255, 255, 255, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E")
            } 

            #sidebarGap{
                overflow-y: auto !important;
                /*overflow-x: hidden !important*/
            }

        </style>
    </head>

    <body>
        <div style="" id="loadingDiv"><div class="loader">Loading...</div></div>
        <section class="mbr-navbar mbr-navbar--freeze mbr-navbar--absolute mbr-navbar--sticky mbr-navbar--auto-collapse" id="ext_menu-0">
            <div class="mbr-navbar__section mbr-section" id="mainHeader">
                <div class="mbr-section__container container">
                    <div class="mbr-navbar__container">
                        <div class="mbr-navbar__column mbr-navbar__column--s mbr-navbar__brand">
                            <span class="mbr-navbar__brand-link mbr-brand mbr-brand--inline">
                                <span class="mbr-brand__logo"><img src="assets/images/logo.png" class="mbr-navbar__brand-img mbr-brand__img"></span>
                                <span class="mbr-brand__name"><a class="mbr-brand__name text-white">CalLands</a></span>
                            </span>
                        </div>
                        <div class="mbr-navbar__hamburger mbr-hamburger"><span class="mbr-hamburger__line"></span></div>
                        <div class="mbr-navbar__column mbr-navbar__menu">
                            <nav class="mbr-navbar__menu-box mbr-navbar__menu-box--inline-right">
                                <div class="mbr-navbar__column">
                                    <ul class="mbr-navbar__items mbr-navbar__items--right float-left mbr-buttons mbr-buttons--freeze mbr-buttons--right btn-decorator mbr-buttons--active">
                                        <li class="mbr-navbar__item"><a class="mbr-buttons__link btn text-white" href="index.html">HOME</a></li>
                                        <li class="mbr-navbar__item"><a class="mbr-buttons__link btn text-white" href="about.html">ABOUT</a></li>
                                        <li class="mbr-navbar__item"><a class="mbr-buttons__link btn text-white" href="contact.html">CONTACT</a></li>
                                    </ul>
                                </div>
                            </nav>
                        </div>

                    </div>
                    <!--<div id="toolbar" class="col-md-12 panel panel-default">-->

                    <!--</div>-->
                </div>
            </div>
        </section>
        <section id="data" class="mbr-section mbr-section--relative mbr-section--fixed-size" id1="features1-3" style="background-color: rgb(255, 255, 255);">
            <div class="mbr-section__container container mbr-section__container--std-top-padding" style="padding-top: 98px; background-color: rgb(44, 44, 44);">
                <div id="graphToggle" class="mbr-section__row row" data-intro="Use these buttons to switch between the Crop data and Rangeland/Forest data (mutually exclusive categories) in the sidebar and click 'Graphs' to show a snapshot of all county graphs on one page." data-step="3">
                    <span >
                        <button type="button" class="btn btn-default tutorial"><i class="fa fa-info-circle"></i></button>

                        <button type="button" class="btn btn-default cdlData">Cropland2013</button>

                        <button type="button" class="btn btn-default cdlData2016">Cropland2016</button>

                        <button type="button" class="btn btn-default gapData">Forest/Rangeland</button>


                        <button id="cdlToggle" type="button" class="btn btn-default toggle-cdl">Graphs</button>

                        <button id="cdlMapToggle" style="display: none" type="button" class="btn btn-default toggle-cdl-map">Map</button>

                        <button id="cdlToggle2016" type="button" class="btn btn-default toggle-cdl2016">Graphs</button>

                        <button id="cdlMapToggle2016" style="display: none" type="button" class="btn btn-default toggle-cdl-map2016">Map</button>

                        <button id="gapToggle" style="display: none" type="button" class="btn btn-default toggle-gap">Graphs</button>

                        <button id="gapMapToggle" style="display: none" type="button" class="btn btn-default toggle-gap-map">Map</button>

                    </span>
                </div>
                <div id="row-main" class="mbr-section__row row">
                    <div id="content" class="col-xs-12 col-md-push-5 col-md-7 card mb-2">
                        <div id="mapHeader" class="card-header navbar navbar-toggleable-md navbar-light bg-faded navbar-map" style="font-size: 150%" data-intro="Use these buttons to toggle the graph sidebar and the legend and layer list on the main map." data-step="2">
                            <button id="mapNav" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="top: 1.5px;">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            Map
                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav mr-auto">
                                    <li class="nav-item">
                                        <a id="sidebarToggle" class="nav-link toggle-sidebar" href="#" style="padding-top: 0px; padding-bottom: 0px; line-height: 15px; color: white">Hide Sidebar</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link toggle-layers" href="#" style="padding-top: 0px; padding-bottom: 0px; line-height: 15px; color: white">Hide Layers</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link toggle-legend" href="#" style="padding-top: 0px; padding-bottom: 0px; line-height: 15px; color: white">Show Legend</a>
                                    </li>
                                    <li class="nav-item">
                                        <a id="mapReset" class="nav-link" href="#" style="padding-top: 0px; padding-bottom: 0px; line-height: 15px; color: white">Reset Symbology</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-block" id="viewDiv" style="position: relative" data-intro="Click on a county at the state level to view the land use data, click on the ownership boundaries at the county level to view property summary statistics." data-step="1">
                            <img class="center" src="loading.gif"/>
                        </div>
                    </div>

                    <!-- sidebar -->
                    <div id="sidebar" class="col-xs-12 col-md-pull-7 col-md panel panel-default" style="overflow-y: auto" role="tablist"  data-toggle="collapse">

                        <div id="cdlSummary" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="CountyName" style="font-size: 150%">
                                <span id="CountyName"></span>
                                <a data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne" class="d-block">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                            </div>
                            <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="CountyName">
                                <div class="card-block">
                                    <table id="dataTable2" class="table table-bordered table-striped">
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <p>Table shows the summary statistics about the private cropland ownership in the county</p>

                                </div>
                            </div>
                        </div>
                        <div id="cdlLandClass" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingTwo" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Percentage of Total Private Cropland by Croptype
                            </div>
                            <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo">
                                <div class="card-block" id="LandClass-Bar-Chart">
                                </div>
                                <div class="card-footer">
                                    <p>Chart represents the percent of private cropland within the county that is planted in a particular type of crop</p>

                                </div>
                            </div>
                        </div>

                        <div id="cdlCumAcres" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingThree" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Cumulative Sum of Privately Owned Acres by Owner
                            </div>
                            <div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree">
                                <div class="card-block" id="cum-acres-chart"></div>
                                <div class="card-footer">
                                    <p>Each point on this graph represents a particular property represented by the area of land grown in a particular crop that is shown on the horizontal x-axis, and the vertical y-axis represents the added acreage of each point and how it contributes to the total acreage planted in a certain type of crop in the county. The shape of the curve illustrates the contribution of varying size classes of properties to the total crop planted (a flatter curve means that larger property owners contribute more to the total cropland planted in the crop, while a steeper curve means that smaller properties contribute more to the total cropland planted in a particular crop type).  The point at the far right end of the graph illustrates the largest single planting in a particular crop type in the county which is shown on the horizontal x-axis, while the vertical y-axis shows the total acreage of land planted in that particular crop in the county. </p>

                                </div>
                            </div>
                        </div>

                        <div id="cdlPieChart" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingFour" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Public vs. Private Ownership of County
                            </div>
                            <div id="collapseFour" class="collapse" role="tabpanel" aria-labelledby="headingFour">
                                <div class="card-block" id="Pie-Chart"></div>
                                <div class="card-footer">
                                    <p>Delineates the percent of all land in the county that is privately vs publicly held.  Public land includes federal lands such as U.S. Forest Service, State Parks, and county and city lands</p>

                                </div>
                            </div>
                        </div>
                        <div id="cdlBarChart" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingFive" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Acres and Number of Private Owners by Size Class
                            </div>
                            <div id="collapseFive" class="collapse" role="tabpanel" aria-labelledby="headingFive">
                                <div class="card-block" id="Bar-Chart"></div>
                                <div class="card-footer">
                                    <p>Figure represents the ownership structure of the county’s privately owned cropland across different size classes of properties.  It describes a) the number of property owners within a particular size class (blue), and b) the percent of total cropland acreage found in a particular size class (green).</p>

                                </div>
                            </div>
                        </div>


                        <div id="cdlDataTable" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingSix" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Summary Private Cropland Statistics
                            </div>
                            <div id="collapseSix" class="collapse" role="tabpanel" aria-labelledby="headingSix">
                                <div class="card-block">
                                    <table id="dataTable" class="table table-bordered table-striped sortable">
                                        <thead>
                                            <tr>
                                                <th>Crop</th>
                                                <th>Total Acres</th>
                                                <th>% Cropland</th>
                                                <th># of Owners</th>
                                                <th>Avg. Acres</th>
                                                <th>Gini Coefficient</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <p>This table shows detailed statistics on the ownership characteristics of particular types of crops that are planted within the county and how much they contribute to the total area of crops planted in the county.  If a single property has multiple crops planted, it will be counted within each crop category in the number of owners. The Gini Coefficient is a measure of inequality, with higher values representing a less equal distribution of land planted in that crop type.</p>
                                    <a href="#" class="card-link save-table">Export Table</a>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div id="sidebar2016" class="col-xs-12 col-md-pull-7 col-md panel panel-default" style="overflow-y: auto" role="tablist"  data-toggle="collapse">

                        <div id="cdlSummary2016" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="CountyName2016" style="font-size: 150%">
                                <span id="CountyName2016"></span>
                                <a data-toggle="collapse" href="#collapseThirteen" aria-expanded="true" aria-controls="collapseThirteen" class="d-block">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                            </div>
                            <div id="collapseThirteen" class="collapse show" role="tabpanel" aria-labelledby="CountyName2016">
                                <div class="card-block">
                                    <table id="dataTable22016" class="table table-bordered table-striped">
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <p>Table shows the summary statistics about the private cropland ownership in the county</p>

                                </div>
                            </div>
                        </div>
                        <div id="cdlLandClass2016" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingFourteen" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseFourteen" aria-expanded="false" aria-controls="collapseFourteen">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Percentage of Total Private Cropland by Croptype
                            </div>
                            <div id="collapseFourteen" class="collapse" role="tabpanel" aria-labelledby="headingFourteen">
                                <div class="card-block" id="LandClass-Bar-Chart2016">
                                </div>
                                <div class="card-footer">
                                    <p>Chart represents the percent of private cropland within the county that is planted in a particular type of crop</p>

                                </div>
                            </div>
                        </div>

                        <div id="cdlCumAcres2016" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingFifteen" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseFifteen" aria-expanded="false" aria-controls="collapseFifteen">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Cumulative Sum of Privately Owned Acres by Owner
                            </div>
                            <div id="collapseFifteen" class="collapse" role="tabpanel" aria-labelledby="headingFifteen">
                                <div class="card-block" id="cum-acres-chart2016"></div>
                                <div class="card-footer">
                                    <p>Each point on this graph represents a particular property represented by the area of land grown in a particular crop that is shown on the horizontal x-axis, and the vertical y-axis represents the added acreage of each point and how it contributes to the total acreage planted in a certain type of crop in the county. The shape of the curve illustrates the contribution of varying size classes of properties to the total crop planted (a flatter curve means that larger property owners contribute more to the total cropland planted in the crop, while a steeper curve means that smaller properties contribute more to the total cropland planted in a particular crop type).  The point at the far right end of the graph illustrates the largest single planting in a particular crop type in the county which is shown on the horizontal x-axis, while the vertical y-axis shows the total acreage of land planted in that particular crop in the county. </p>

                                </div>
                            </div>
                        </div>

                        <div id="cdlPieChart2016" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingSixteen" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseSixteen" aria-expanded="false" aria-controls="collapseSixteen">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Public vs. Private Ownership of County
                            </div>
                            <div id="collapseSixteen" class="collapse" role="tabpanel" aria-labelledby="headingSixteen">
                                <div class="card-block" id="Pie-Chart2016"></div>
                                <div class="card-footer">
                                    <p>Delineates the percent of all land in the county that is privately vs publicly held.  Public land includes federal lands such as U.S. Forest Service, State Parks, and county and city lands</p>

                                </div>
                            </div>
                        </div>
                        <div id="cdlBarChart2016" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingSeventeen" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseSeventeen" aria-expanded="false" aria-controls="collapseSeventeen">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Acres and Number of Private Owners by Size Class
                            </div>
                            <div id="collapseSeventeen" class="collapse" role="tabpanel" aria-labelledby="headingSeventeen">
                                <div class="card-block" id="Bar-Chart2016"></div>
                                <div class="card-footer">
                                    <p>Figure represents the ownership structure of the county’s privately owned cropland across different size classes of properties.  It describes a) the number of property owners within a particular size class (blue), and b) the percent of total cropland acreage found in a particular size class (green).</p>

                                </div>
                            </div>
                        </div>


                        <div id="cdlDataTable2016" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingEighteen" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseEighteen" aria-expanded="false" aria-controls="collapseEighteen">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Summary Private Cropland Statistics
                            </div>
                            <div id="collapseEighteen" class="collapse" role="tabpanel" aria-labelledby="headingEighteen">
                                <div class="card-block">
                                    <table id="dataTable2016" class="table table-bordered table-striped sortable">
                                        <thead>
                                            <tr>
                                                <th>Crop</th>
                                                <th>Total Acres</th>
                                                <th>% Cropland</th>
                                                <th># of Owners</th>
                                                <th>Avg. Acres</th>
                                                <th>Gini Coefficient</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <p>This table shows detailed statistics on the ownership characteristics of particular types of crops that are planted within the county and how much they contribute to the total area of crops planted in the county.  If a single property has multiple crops planted, it will be counted within each crop category in the number of owners. The Gini Coefficient is a measure of inequality, with higher values representing a less equal distribution of land planted in that crop type.</p>
                                    <a href="#" class="card-link save-table">Export Table</a>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div id="sidebarGap" class="col-xs-12 col-md-pull-7 col-md panel panel-default" style="overflow-y: auto" role="tablist"  data-toggle="collapse">
                        <div id="gapSummary" class="col-md-12 card mb-2">
                            <div class="card-header" role="tab" id="CountyNameGap" style="font-size: 150%">
                                <a class="d-block" data-toggle="collapse" href="#collapseSeven" aria-expanded="true" aria-controls="collapseSeven">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                            </div>
                            <div id="collapseSeven" class="collapse show" role="tabpanel" aria-labelledby="CountyNameGap">
                                <div class="card-block">
                                    <table id="dataTableGap" class="table table-bordered table-striped">
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <p>Table shows the summary statistics about the private forest and rangeland ownership in the county</p>

                                </div>
                            </div>
                        </div>
                        <div id="gapLandClass" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingEight" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Percentage of Total Private Forest and Rangeland by Land Class</div>
                            <div id="collapseEight" class="collapse" role="tabpanel" aria-labelledby="headingEight">
                                <div class="card-block" id="LandClass-Bar-Chart-Gap"></div>
                                <div class="card-footer">
                                    <p>Chart represents the percent of private land in the county that is composed of the particular vegetation classes</p>

                                </div>
                            </div>
                        </div>

                        <div id="gapCumAcres" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingNine" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Cumulative Sum of Privately Owned Acres by Owner</div>
                            <div id="collapseNine" class="collapse" role="tabpanel" aria-labelledby="headingNine">
                                <div class="card-block" id="cum-acres-charts-Gap"></div>
                                <div class="card-footer">
                                    <p>Each point on this graph represents a particular property represented by the area of land in a particular vegetation class, which is shown on the horizontal x-axis. The vertical y-axis represents the added acreage of each point and how it contributes to the total acreage of a natural vegetation class in the county. The shape of the curve illustrates the contribution of varying size properties to the total amount of a vegetation class in the county (a flatter curve means that larger property owners contribute more to the total amount of that vegetation class, while a steeper curve means that smaller properties contribute more to the total area of that vegetation class in the county).  The point at the far right end of the line graph illustrates the largest acreage of that natural vegetation owned in that county, which is shown on the horizontal x-axis, while the vertical y-axis shows the total acreage of land in that natural vegetation class in the county.</p>

                                </div>
                            </div>
                        </div>


                        <div id="gapPieChart" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingTen" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseTen" aria-expanded="false" aria-controls="collapseTen">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Public vs. Private Ownership of County
                            </div>
                            <div id="collapseTen" class="collapse" role="tabpanel" aria-labelledby="headingTen">
                                <div class="card-block" id="Pie-Chart-Gap"></div>
                                <div class="card-footer">
                                    <p>Delineates the percent of all land in the county that is privately vs publicly held.  Public land includes federal lands such as U.S. Forest Service, State Parks, and county and city lands.</p>

                                </div>
                            </div>
                        </div>
                        <div id="gapBarChart" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingEleven" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseEleven" aria-expanded="false" aria-controls="collapseEleven">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Acres and Number of Private Owners by Size Class
                            </div>
                            <div id="collapseEleven" class="collapse" role="tabpanel" aria-labelledby="headingEleven">
                                <div class="card-block" id="Bar-Chart-Gap"></div>
                                <div class="card-footer">
                                    <p>Chart represents the ownership structure of the county’s privately owned natural vegetation classes across different size classes of properties.  It describes a) the number of property owners within a particular size class (blue), and b) the percent of total private natural vegetation acreage found in a particular size class (green).</p>

                                </div>
                            </div>
                        </div>

                        <div id="gapDataTable" class="col-md-12 card mb-2">

                            <div class="card-header" role="tab" id="headingTwelve" style="font-size: 150%">
                                <a class="collapsed d-block" data-toggle="collapse" href="#collapseTwelve" aria-expanded="false" aria-controls="collapseTwelve">
                                    <i class="fa fa-chevron-down pull-right"></i>
                                </a>
                                Summary Private Forest and Rangeland Statistics
                            </div>
                            <div id="collapseTwelve" class="collapse" role="tabpanel" aria-labelledby="headingTwelve">
                                <div class="card-block">
                                    <table id="dataTableGap2" class="table table-bordered table-striped sortable">
                                        <thead>
                                            <tr>
                                                <th>Land Cover Class</th>
                                                <th>Total Acres</th>
                                                <th>% Forest and Rangeland</th>
                                                <th># of Owners</th>
                                                <th>Avg. Acres</th>
                                                <th>Gini Coefficient</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <p>This table shows detailed statistics on the ownership characteristics of natural vegetation classes within the county and how much they contribute to the total area of natural vegetation in the county.  If a single property has multiple types of natural vegetation classes, it will be counted within each vegetation class in the number of owners. The Gini Coefficient is a measure of inequality, with higher values representing a less equal distribution of land planted in that natural vegetation class.</p>
                                    <a href="#" class="card-link save-table2">Export Table</a>
                                </div>
                            </div>
                        </div>


                    </div>



                </div>
            </div>
        </section>

        <section class="mbr-section mbr-section--relative mbr-section--fixed-size" id="contacts1-5" style="background-color: rgb(70, 70, 70);">
            <div class="mbr-section__container container">
                <div class="mbr-contacts mbr-contacts--wysiwyg row" style="padding-top: 10px; padding-bottom: 10px;">
                    <div class="col-md-12">
                        <div style="text-align:center">
                            <a style="color: white" href="http://ucanr.edu/">Agriculture and Natural Resources, University of California</a>
                            <br/>

                            <a style="font-size: 70%; color: white" href="http://ucanr.edu/Copyright/">©2016 Regents of the University of California</a>

                            <a style="font-size: 70%; color: white" href="http://ucanr.edu/sites/anrstaff/Diversity/Affirmative_Action/Resources/Policy-related_downloads/">Nondiscrimination Statement</a>

                            <a style="font-size: 70%; color: white" href="http://ucanr.edu/Accessibility/">Accessibility</a>

                            <a style="font-size: 70%; color: white" href="#">Privacy Policy</a>

                            <a style="font-size: 70%; color: white" href="#">Help</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <script>
            var dojoConfig = {
                has: {
                    "esri-featurelayer-webgl": 1
                }
            };
        </script>


        <script src="assets/web/assets/jquery/jquery.min.js"></script>
        <!-- <script src="assets/bootstrap/js/bootstrap.min.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
        <script src="assets/smooth-scroll/smooth-scroll.js"></script>
        <script src="assets/jarallax/jarallax.js"></script>
        <script src="js/d3-format.min.js"></script>
        <script src="http://d3js.org/d3.v3.js"></script>
        <script src="http://d3js.org/topojson.v2.min.js"></script>
        <script src="js/colorbrewer.js"></script>
        <script src="js/bootstrap-sortable.js"></script>
        <script src="js/moment.min.js"></script>
        <script src="js/canvas2image.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/intro.min.js"></script>
        <script src="https://code.highcharts.com/highcharts.src.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="assets/mobirise/js/script.js"></script>
        <script src="assets/formoid/formoid.min.js"></script>
        <script src="https://js.arcgis.com/4.5/"></script>
        <script src="https://use.fontawesome.com/c5d070007c.js"></script>


        <script>
            var countyLayer,
                parcelLayer,
                Parcels,
                cdl,
                cdlContext,
                cdlChart,
                cdlOwnerChart,
                cdlPieChart,
                cumAcresChart,
                gapContext,
                gapChart,
                gapOwnerChart,
                gapPieChart,
                gapCumAcresChart,
                tableData,
                tableDataGap,
                dataType,
                countyName,
                view,
                layerCount,
                cdlLayer = 1,
                cdlLayer2016 = 1,
                gapLayer = 1,
                dataButton = 1,
                viewButton = 1,
                sidebarButton = 1;

            require([
                "esri/Map",
                "esri/geometry/Extent",
                "esri/tasks/QueryTask",
                "esri/tasks/support/Query",
                "esri/Graphic",
                "esri/layers/GraphicsLayer",
                "esri/symbols/SimpleFillSymbol",
                "dojo/_base/Color",
                "esri/views/MapView",
                "esri/layers/MapImageLayer",
                "esri/layers/ImageryLayer",
                "esri/layers/support/RasterFunction",
                "esri/layers/support/MosaicRule",
                "esri/widgets/Home",
                "esri/widgets/LayerList",
                "esri/widgets/Legend",
                "esri/layers/FeatureLayer",
                "esri/tasks/IdentifyTask",
                "esri/tasks/support/IdentifyParameters",
                "esri/renderers/SimpleRenderer",
                "esri/core/watchUtils",
                "dojo/_base/array",
                "dojo/on",
                "dojo/dom",
                "dojo/parser",
                "dojo/domReady!"
            ], function(Map, Extent, QueryTask, Query, Graphic, GraphicsLayer, SimpleFillSymbol, Color, MapView, MapImageLayer, ImageryLayer, RasterFunction, MosaicRule, Home, LayerList, Legend, FeatureLayer, IdentifyTask, IdentifyParameters, SimpleRenderer, watchUtils, arrayUtils, on, dom, parser) {

                /**************************************************************************
             * Create image layer with client defined rendering rules and mosaic rules
             *************************************************************************/

                // Define the way overlapping images are mosaicked together
                var mosaicRule = new MosaicRule({
                    ascending: true,
                    method: "center",
                    operation: "last"
                });

                // Defines a Remap raster function. Remap reclassifies pixel
                // values to new values. In this case we want to separate
                // two landcover types: forested areas and non-forested areas

                var remapRF = new RasterFunction({
                    functionName: "Remap",
                    functionArguments: {
                        // pixel values of forest categories are 41, 42, and 43
                        // according to the  raster attribute table.
                        // The InputRanges property defines the ranges of intial pixel values to remap
                        // Three ranges: [0, 41], [41, 44], and [44, 255] are defined to extract forest pixels.
                        inputRanges: [1, 1.9, 2, 2.9, 3, 3.9, 4, 11.9, 12, 13.9, 14, 20.9, 21, 23.9, 24, 24.9, 25, 30.9, 31, 32.9, 33, 35.9, 36, 37.9, 38, 53.9, 54, 54.9, 55, 57.9, 58, 58.9, 59, 60.9, 61, 65.9, 66, 68.9, 69, 70.9, 71, 72.9, 72, 73.9, 74, 74.9, 75, 75.9, 76, 76.9, 77, 93.9, 92, 111.9, 112, 120.9, 121, 122.9, 123, 130.9, 131, 140.9, 141, 141.9, 142, 142.9, 143, 151.9, 152, 175.9, 176, 189.9, 190, 203.9, 204, 204.9, 205, 205.9, 206, 210.9, 211, 212.9, 213, 216.9, 217, 218.9, 219, 219.9, 220, 220.9, 221, 222.9, 223, 223.9, 224, 224.9, 225, 226.9, 227, 229.9, 230, 230.9, 231, 233.9, 234, 241.9, 242, 248],
                        // non-forest pixels (0-41 and 44-255) are remapped to a value of 1,
                        // forest pixels (41-44) are remapped to a value of 2.
                        outputValues: [2, 3, 4, 5, 2, 6, 5, 7, 5, 6, 5, 8, 6, 9, 6, 10, 6, 11, 12, 13, 14, 12, 14, 15, 16, 12, 17, 18, 19, 26, 20, 21, 22, 23, 24, 10, 25, 14, 5, 6, 12, 6, 12, 6, 12, 6, 12, 6, 5, 6, 5, 6, 5, 6],
                        // $$(default) refers to the entire image service,
                        // $2 refers to the second image of the image service
                        raster: "$$"
                    }
                });

                var remapRFGap = new RasterFunction({
                    functionName: "Remap",
                    functionArguments: {
                        // pixel values of forest categories are 41, 42, and 43
                        // according to the  raster attribute table.
                        // The InputRanges property defines the ranges of intial pixel values to remap
                        // Three ranges: [0, 41], [41, 44], and [44, 255] are defined to extract forest pixels.
                        inputRanges: [0, 282.9, 296, 305.9, 307, 459.9, 460, 477.9, 485, 498.9, 504, 506.9, 509, 509.9, 514, 534.9, 538, 548.9, 550, 550.9, 553, 554.9, 556, 557.9, 558, 553.9, 565, 573.9, 578, 579.9, 580, 580.9, 581, 584],
                        // non-forest pixels (0-41 and 44-255) are remapped to a value of 1,
                        // forest pixels (41-44) are remapped to a value of 2.
                        outputValues: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
                        // $$(default) refers to the entire image service,
                        // $2 refers to the second image of the image service
                        raster: "$$"
                    }
                });

                var remapTest = new RasterFunction({
                    functionName: "Remap",
                    functionArguments: {
                        // pixel values of forest categories are 41, 42, and 43
                        // according to the  raster attribute table.
                        // The InputRanges property defines the ranges of intial pixel values to remap
                        // Three ranges: [0, 41], [41, 44], and [44, 255] are defined to extract forest pixels.
                        inputRanges: [1, 1, 213, 248],
                        // non-forest pixels (0-41 and 44-255) are remapped to a value of 1,
                        // forest pixels (41-44) are remapped to a value of 2.
                        outputValues: [2, 14],
                        // $$(default) refers to the entire image service,
                        // $2 refers to the second image of the image service
                        raster: "$$"
                    }
                });

                // The Colormap raster function adds color to each pixel
                // based on its pixel value

                var colorAll = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 249, 249, 0], //Corn
                            [3, 255, 212, 0], //Cotton
                            [4, 0, 131, 255], //Rice
                            [5, 142, 234, 255], //Grain Crops
                            [6, 1, 109, 6], //Vegs & Fruits
                            [7, 5, 0, 109], //Winter Wheat
                            [8, 222, 187, 39], //Alfalfa & Hay
                            [9, 255, 0, 0], //Tomatoes
                            [10, 148, 168, 67], //Grassland
                            [11, 86, 44, 10], //Fallow
                            [12, 249, 112, 32], //Fruit Trees
                            [13, 127, 0, 255], //Grapes
                            [14, 72, 202, 59], //Other Tree Crops
                            [15, 132, 120, 79], //Almonds
                            [16, 245, 155, 255], //Walnuts
                            [17, 10, 0, 206], //Water
                            [18, 255, 255, 255], //Perennial Ice/Snow
                            [19, 252, 143, 143], //Low Intensity Developed
                            [20, 71, 71, 71], //Barren
                            [21, 25, 147, 1], //Deciduous Forest
                            [22, 4, 81, 0], //Evergreen Forest
                            [23, 40, 122, 48], //Mixed Forest
                            [24, 104, 107, 62], //Shrubland
                            [25, 59, 56, 114], //Wetlands
                            [26, 112, 1, 1] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorCorn = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 249, 249, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorCotton = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 255, 212, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorRice = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 131, 255], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorGrain = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 142, 234, 255], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorVeg = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 1, 109, 6], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorWheat = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 5, 0, 109], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorAlfalfa = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 222, 187, 39], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorTomato = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 255, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorGrassland = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 148, 168, 67], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorFallow = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 86, 44, 10], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorFruit = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 249, 112, 32], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorGrape = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 127, 0, 255], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorOther = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 72, 202, 59], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorAlmond = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 132, 120, 79], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorWalnut = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 245, 155, 255], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorWater = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 10, 0, 206], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorIce = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 255, 255, 255], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorLowDev = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 252, 143, 143], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorBarren = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 71, 71, 71], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorDeciduous = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 25, 147, 1], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorEvergreen = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 4, 81, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorMixed = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 40, 122, 48], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorShrubland = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 104, 107, 62], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorWetland = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 59, 56, 114], //Wetlands
                            [26, 0, 0, 0] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorHighDev = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //Corn
                            [3, 0, 0, 0], //Cotton
                            [4, 0, 0, 0], //Rice
                            [5, 0, 0, 0], //Grain Crops
                            [6, 0, 0, 0], //Vegs & Fruits
                            [7, 0, 0, 0], //Winter Wheat
                            [8, 0, 0, 0], //Alfalfa & Hay
                            [9, 0, 0, 0], //Tomatoes
                            [10, 0, 0, 0], //Grassland
                            [11, 0, 0, 0], //Fallow
                            [12, 0, 0, 0], //Fruit Trees
                            [13, 0, 0, 0], //Grapes
                            [14, 0, 0, 0], //Other Tree Crops
                            [15, 0, 0, 0], //Almonds
                            [16, 0, 0, 0], //Walnuts
                            [17, 0, 0, 0], //Water
                            [18, 0, 0, 0], //Perennial Ice/Snow
                            [19, 0, 0, 0], //Low Intensity Developed
                            [20, 0, 0, 0], //Barren
                            [21, 0, 0, 0], //Deciduous Forest
                            [22, 0, 0, 0], //Evergreen Forest
                            [23, 0, 0, 0], //Mixed Forest
                            [24, 0, 0, 0], //Shrubland
                            [25, 0, 0, 0], //Wetlands
                            [26, 112, 1, 1] //High Intensity Developed
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRF
                    },
                    outputPixelType: "U16"
                });

                var colorAllGap = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 1, 155, 4], //TempForest
                            [3, 132, 145, 72], //MedScrub
                            [4, 85, 145, 72], //TempShrub
                            [5, 158, 140, 79], //WarmSemiDesert
                            [6, 214, 196, 130], //CoolSemiDesert
                            [7, 201, 226, 163], //TempAlpine
                            [8, 52, 72, 112], //SaltVeg
                            [9, 239, 207, 119], //MedTemp
                            [10, 221, 184, 208], //SemiDesert
                            [11, 255, 255, 255], //Polar
                            [12, 96, 96, 96], //Barren
                            [13, 247, 246, 210], //Ag
                            [14, 255, 0, 0], //Introduced
                            [15, 183, 183, 183], //Disturbed
                            [16, 0, 0, 255], //Water
                            [17, 255, 123, 0], //Mining
                            [18, 155, 52, 52], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorTempForest = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 1, 155, 4], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorMedScrub = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 132, 145, 72], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorTempShrub = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 85, 145, 72], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorWSD = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 158, 140, 79], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorCSD = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 214, 196, 130], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorTempAlp = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 201, 226, 163], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorSaltVeg = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 52, 72, 112], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorMedTemp = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 239, 207, 119], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorSemiDes = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 221, 184, 208], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorPolar = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 255, 255, 255], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorBare = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 96, 96, 96], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorAg = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 247, 246, 210], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorIntro = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 255, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorDist = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 183, 183, 183], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorWaterGap = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 255], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorMining = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 255, 123, 0], //Mining
                            [18, 0, 0, 0], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });

                var colorUrban = new RasterFunction({
                    functionName: "Colormap",
                    functionArguments: {
                        colormap: [
                            [2, 0, 0, 0], //TempForest
                            [3, 0, 0, 0], //MedScrub
                            [4, 0, 0, 0], //TempShrub
                            [5, 0, 0, 0], //WarmSemiDesert
                            [6, 0, 0, 0], //CoolSemiDesert
                            [7, 0, 0, 0], //TempAlpine
                            [8, 0, 0, 0], //SaltVeg
                            [9, 0, 0, 0], //MedTemp
                            [10, 0, 0, 0], //SemiDesert
                            [11, 0, 0, 0], //Polar
                            [12, 0, 0, 0], //Barren
                            [13, 0, 0, 0], //Ag
                            [14, 0, 0, 0], //Introduced
                            [15, 0, 0, 0], //Disturbed
                            [16, 0, 0, 0], //Water
                            [17, 0, 0, 0], //Mining
                            [18, 155, 52, 52], //Urban
                        ],
                        // Setting the previous raster function to the Raster
                        // property of a new raster function allows you to chain functions
                        raster: remapRFGap
                    },
                    outputPixelType: "U16"
                });


                /********************
             * Create image layer
             ********************/

                layer = new ImageryLayer({
                    url: "https://geodata.ucanr.edu/arcgis/rest/services/CalLandTrends/CDL2013/ImageServer",
                    interpolation: "RSP_NearestNeighbor",
                    format: "jpgpng", // server exports in either jpg or png format
                    opacity: 0.5,
                    title: "Cropland"
                });

                layerGap = new ImageryLayer({
                    url: "https://geodata.ucanr.edu/arcgis/rest/services/CalLandTrends/gaplndcov_CA/ImageServer",
                    interpolation: "RSP_NearestNeighbor",
                    format: "jpgpng", // server exports in either jpg or png format
                    opacity: 0.5,
                    title: "Forest and Rangeland"
                });

                countyLayer = new GraphicsLayer();
                parcelLayer = new GraphicsLayer({
                    title: "Selected Parcel"
                });

                Parcels = new MapImageLayer({
                    url: "https://geodata.ucanr.edu/arcgis/rest/services/CalLandTrends/Ownership_Boundaries/MapServer",
                    layerId: 0,
                    legendEnabled: false,
                    title: "Ownership Boundaries"
                });

                County = new FeatureLayer({
                    url: "http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/",
                    layerId: 0,
                    legendEnabled: false,
                    title: "Counties"
                });

                County.renderer = new SimpleRenderer({
                    symbol: new SimpleFillSymbol({
                        color: [0, 255, 0, 0],
                        outline: { // autocasts as new SimpleLineSymbol()
                            color: [255, 255, 255],
                            width: 1
                        }
                    })
                });


                divHeight();

                parser.parse();

                var countyNames,
                    rasterAttributes,
                    Counties = "https://geodata.ucanr.edu/arcgis/rest/services/Geoenrichment/MapServer/2",
                    parcelURL = "https://geodata.ucanr.edu/arcgis/rest/services/CalLandTrends/Ownership_Boundaries/MapServer",
                    qAdminBoundaries = new Query(),
                    countyLayerGap = new GraphicsLayer();

                var map = new Map({
                    basemap: "dark-gray",
                    layers: [layer, layerGap, Parcels, County]
                });

                view = new MapView({
                    container: "viewDiv",
                    map: map,
                    center: [-119.44944, 37.16611],
                    zoom: 6
                });

                view.then(function() {

                    var layerList = new LayerList({
                        view: view
                    });


                    // Add widget to the top right corner of the view
                    view.ui.add(layerList, "top-right");

                    var legend = new Legend({
                        view: view

                    });

                    // Add widget to the bottom right corner of the view
                    view.ui.add(legend, "top-right");

                    var homeWidget = new Home({
                        view: view
                    });

                    // adds the home widget to the top left corner of the MapView
                    view.ui.add(homeWidget, "top-left");

                    on(view, "click", function(event) {
                        if (view.zoom <= 9){
                            executeCountyQuery(event);
                        } else if (view.zoom >= 10){
                            $(".center").show();
                            executeParcelQuery(event);
                        }
                    });

                    watchUtils.whenTrue(view, "stationary", function() {
                        setTimeout(formatLegend, 500);
                    });

                    countyQueryTask = new QueryTask({
                        url: "http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0"
                    });
                    countyQuery = new Query();
                    countyQuery.returnGeometry = true;
                    countyQuery.outFields = ["*"];

                    parcelQueryTask = new QueryTask({
                        url: "http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CA_Parcel_Data/FeatureServer/0"
                    });
                    parcelQuery = new Query();
                    parcelQuery.returnGeometry = true;
                    parcelQuery.outFields = ["*"];
                });

                function loadMobile() {
                    if($(window).width() <= 600) {
                        view.zoom = 5;
                        $('.toggle-layers').trigger('click');
                    }
                }

                layer.set("renderingRule", colorAll);

                layerGap.set("renderingRule", colorAllGap);

                $('#content').click(function(){
                    setTimeout(formatLegend, 500);
                });


                $('#mapReset').click(function() {
                    layer.set("renderingRule", colorAll);
                    layerGap.set("renderingRule", colorAllGap);
                    formatLegend();
                });

                $('.esri-component, .esri-layer-list, .esri-widget').click(function() {
                    formatLegend();
                });

                var selectedCounty = "Fresno";
                var adminLevel = "County";

                //querySelectedAdmin(scrubItem(selectedCounty));

                function scrubItem(myList) {
                    myList = myList.replace(/,/g, "','");
                    myList = myList.replace(/%2C%20/g, "','");
                    myList = myList.replace(/%20/g, " ");
                    whereclause = myList;
                    return myList;
                }

                function getCookie(cname) {
                    var name = cname + "=";
                    var ca = document.cookie.split(';');
                    for (var i = 0; i < ca.length; i++) {
                        var c = ca[i];
                        while (c.charAt(0) == ' ') {
                            c = c.substring(1);
                        }
                        if (c.indexOf(name) != -1) {
                            return c.substring(name.length, c.length);
                        }
                    }
                    return "";
                }


                function showResults(featureSet) {
                    clearGraphics();
                    //Performance enhancer - assign featureSet array to a single variable.
                    var resultFeatures = featureSet.features,
                        symbol = new SimpleFillSymbol({
                            color: [0, 255, 0],
                            outline: { // autocasts as new SimpleLineSymbol()
                                color: [255, 255, 255],
                                width: 1.5
                            }
                        });
                    //Loop through each feature returned
                    for (var i = 0, il = resultFeatures.length; i < il; i++) {
                        //Get the current feature from the featureSet.
                        //Feature is a graphic
                        var graphic = new Graphic({
                            geometry: resultFeatures[i].geometry,
                            symbol: symbol
                        });
                        //Add graphic to the map graphics layer.
                        countyLayer.add(graphic);
                    }
                    //map.add(countyLayer);

                    view.goTo({
                        target: countyLayer.graphics
                    });

                }

                function showResults2(featureSet) {
                    clearGraphics();
                    //Performance enhancer - assign featureSet array to a single variable.
                    var resultFeatures = featureSet.features,
                        symbol = new SimpleFillSymbol({
                            color: [255, 255, 255, 0],
                            outline: { // autocasts as new SimpleLineSymbol()
                                color: [0, 255, 255],
                                width: 1.5
                            }
                        });
                    //Loop through each feature returned
                    for (var i = 0, il = resultFeatures.length; i < il; i++) {
                        //Get the current feature from the featureSet.
                        //Feature is a graphic
                        var graphic = new Graphic({
                            geometry: resultFeatures[i].geometry,
                            symbol: symbol
                        });
                        //Add graphic to the map graphics layer.
                        parcelLayer.add(graphic);
                    }
                    map.add(parcelLayer);

                    /*view.goTo({
                        target: parcelLayer.graphics
                    });*/

                }

                function clearGraphics() {
                    //first remove all graphics added directly to map
                    view.graphics.removeAll();
                    countyLayer.removeAll();
                    parcelLayer.removeAll();

                }

                function querySelectedAdmin(Area) {
                    if (adminLevel === "County") {
                        qtAdminBoundaries = new QueryTask(Counties);
                        qAdminBoundaries.where = "NAME in ('" + Area + "')";
                    } else if (adminLevel === "State") {
                        qtAdminBoundaries = new QueryTask(States);
                        qAdminBoundaries.where = "NAME in ('" + Area + "')"
                    } else {
                        qtAdminBoundaries = new QueryTask(Countries);
                        qAdminBoundaries.where = "NAME in ('" + Area + "')";
                    }
                    qAdminBoundaries.geometry = "";
                    qAdminBoundaries.returnGeometry = true;
                    qtAdminBoundaries.execute(qAdminBoundaries).then(function(results) {
                        showResults(results);
                    });
                    //qtAdminBoundaries.;pexecute(qAdminBoundaries, showResultsGap);
                }

                function selectedGraphic(event) {
                    if (adminLevel === "County") {
                        countyNames = event.graphic.attributes.name;
                    } else if (adminLevel === "State") {
                        countyNames = event.graphic.attributes.NAME;
                    } else {
                        countyNames = event.graphic.attributes.name;
                    }
                }

                function layerCheck() {

                    if (layer.visible) {
                        cdlLayer = 1;
                    } else {
                        cdlLayer = 0;
                    }

                    if (layerGap.visible){
                        gapLayer = 1;
                    } else {
                        gapLayer = 0;
                    }

                }

                function executeCountyQuery(event) {
                    countyQuery.geometry = event.mapPoint;
                    countyQuery.spatialRelationship = "intersects";
                    countyQueryTask.execute(countyQuery).then(function(result) {
                        //console.log(result.features[0]);
                        clicked(result.features[0]);
                    });
                }

                function executeParcelQuery(event) {
                    layerCheck();
                    parcelQuery.geometry = event.mapPoint;
                    parcelQuery.spatialRelationship = "intersects";
                    parcelQueryTask.execute(parcelQuery).then(function(result) {

                        county = result.features[0].attributes.COUNTY;
                        landtype = result.features[0].attributes.LandType;
                        acres = result.features[0].attributes.ACRES;
                        owner = result.features[0].attributes.OWNER;
                        objid = result.features[0].attributes.OBJECTID;

                        $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CA_Parcel_Data/FeatureServer/0/queryRelatedRecords?objectIds=" + objid + "&relationshipId=0&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                            layerCounter = 1;

                            topFiveCDL = '';

                            if (datajson.relatedRecordGroups.length > 0) {
                                $.each(datajson.relatedRecordGroups[0].relatedRecords, function(i, val) {

                                    if (layerCounter == 1) {
                                        topFiveCDL = '<br><b>Top Cropland Types:</b><br>';
                                    }
                                    topFiveCDL += val.attributes.ClassRank + '<br>';
                                    layerCounter = layerCounter + 1;
                                });
                            }

                            $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CA_Parcel_Data/FeatureServer/0/queryRelatedRecords?objectIds=" + objid + "&relationshipId=1&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                                layerCounter = 1;

                                topFiveGAP = '';

                                if (datajson.relatedRecordGroups.length > 0) {
                                    $.each(datajson.relatedRecordGroups[0].relatedRecords, function(i, val) {

                                        if (layerCounter == 1) {
                                            topFiveGAP = '<br><b>Top Forest and Rangeland Types:</b><br>';
                                        }
                                        topFiveGAP += val.attributes.ClassRank + '<br>';
                                        layerCounter = layerCounter + 1;
                                    });
                                }

                                if (cdlLayer == 1 && gapLayer == 1){
                                    popupTemplate = { // autocasts as new PopupTemplate()
                                        title: county + " County",
                                        content:
                                        "<b>Ownership Type:</b> " + landtype +
                                        "<br><b>Acres:</b> " + acres +
                                        topFiveCDL +
                                        topFiveGAP
                                    };
                                } else if (cdlLayer == 1 && gapLayer == 0){
                                    popupTemplate = { // autocasts as new PopupTemplate()
                                        title: county + " County",
                                        content:
                                        "<b>Ownership Type:</b> " + landtype +
                                        "<br><b>Acres:</b> " + acres +
                                        topFiveCDL

                                    };
                                } else if (cdlLayer == 0 && gapLayer == 1){
                                    popupTemplate = { // autocasts as new PopupTemplate()
                                        title: county + " County",
                                        content:
                                        "<b>Ownership Type:</b> " + landtype +
                                        "<br><b>Acres:</b> " + acres +
                                        topFiveGAP
                                    };
                                }

                                showPopup();
                                showResults2(result);
                            });
                        });


                    }); // Send the array of features to showPopup()

                    // Shows the results of the Identify in a popup once the promise is resolved
                    function showPopup() {

                        $(".center").hide();
                        view.popup.dockEnabled = true;
                        view.popup.dockOptions = {
                            position: "bottom-left"
                        };
                        //if (response.length > 0) {
                        view.popup.open({
                            title: popupTemplate.title,
                            content: popupTemplate.content,
                            location: event.mapPoint
                        });
                        //}
                        dom.byId("viewDiv").style.cursor = "auto";
                    };
                }

                $(window).resize(function(){

                    $('.center').css({
                        position:'absolute',
                        left: ($("#viewDiv").width() - $('.center').outerWidth())/2,
                        top: ($("#viewDiv").height() - $('.center').outerHeight())/2,
                        zindex: 10
                    });

                });

                // To initially run the function:
                $(window).resize();

                setTimeout(loadMobile, 500);

                //Set number formatting
                var ft = d3.format(",.2f");
                var f = d3.format(".2f");
                var t = d3.format(",");
                var p = d3.format(".2%");
                var tp = d3.format(".0");

                var countyID;

                var FresnoJSON = {"type":"Feature","id":55,"geometry":{"type":"Polygon","coordinates":[[[-120.655962852,36.9528369980001],[-120.590578842,36.9526460020001],[-120.590495846,36.9816470050001],[-120.585371846,36.9911810070001],[-120.598576849,36.998635006],[-120.541708845,37.044510014],[-120.545548843,37.0275870130001],[-120.508977835,37.007628013],[-120.499531831,36.981971011],[-120.483807828,36.9709900120001],[-120.475178823,36.9392570090001],[-120.468023821,36.9374770100001],[-120.450353816,36.911177008],[-120.466707816,36.8897490050001],[-120.453678813,36.880795005],[-120.456258811,36.8628680030001],[-120.433898807,36.850587004],[-120.417107803,36.8356310030001],[-120.410456801,36.8400100050001],[-120.400722798,36.8224150030001],[-120.389042796,36.824446004],[-120.369624792,36.8103600040001],[-120.37026879,36.784945002],[-120.344347786,36.786357003],[-120.348862788,36.798260004],[-120.335575783,36.7841750040001],[-120.300369777,36.7776380060001],[-120.290606774,36.7630520060001],[-120.285516775,36.773509007],[-120.229191765,36.76969201],[-120.233514767,36.77867301],[-120.217502766,36.7886710120001],[-120.202230763,36.7900100140001],[-120.18884276,36.776413013],[-120.17221076,36.8031010170001],[-120.155348757,36.7988210180001],[-120.136584755,36.8093010200001],[-120.104274751,36.813356023],[-120.079470748,36.825350026],[-120.070745745,36.8186260260001],[-120.057788743,36.822865027],[-120.027787738,36.814510028],[-119.984047734,36.8408970340001],[-119.96665173,36.8324870340001],[-119.932350726,36.843328037],[-119.909110722,36.84620404],[-119.884901719,36.858554042],[-119.865895715,36.847952042],[-119.847476714,36.8603990450001],[-119.823433708,36.848338045],[-119.814433707,36.850143046],[-119.809651708,36.8625740480001],[-119.788202706,36.8766120500001],[-119.789667708,36.8953540520001],[-119.772749708,36.918604056],[-119.758740706,36.9202430560001],[-119.752544706,36.9352280580001],[-119.733779704,36.9464460610001],[-119.742373707,36.9537030610001],[-119.740512709,36.9702170620001],[-119.713194706,36.991643067],[-119.705368705,36.999799067],[-119.695387705,37.0101260700001],[-119.675531702,37.0091560710001],[-119.657323699,37.016900073],[-119.657574701,37.0248630740001],[-119.652748702,37.0421230750001],[-119.6426867,37.043435076],[-119.630368696,37.0318470760001],[-119.634611697,37.0273760760001],[-119.627897695,37.023892076],[-119.619055695,37.030371077],[-119.610558695,37.0452580790001],[-119.610415697,37.06066508],[-119.606850696,37.068044081],[-119.598545696,37.071554082],[-119.591262695,37.0681350830001],[-119.580981692,37.0660830830001],[-119.56842869,37.063574084],[-119.56399469,37.064072083],[-119.56189269,37.0680860840001],[-119.56115169,37.071988085],[-119.562760691,37.0762810850001],[-119.560610691,37.0816160850001],[-119.559583692,37.0862740860001],[-119.557143691,37.089723086],[-119.552718691,37.092806087],[-119.54842969,37.0944230870001],[-119.543433689,37.095191088],[-119.539930689,37.098253088],[-119.538213689,37.102840089],[-119.53808769,37.1067940890001],[-119.541925691,37.1105900900001],[-119.547497692,37.11603009],[-119.552852693,37.116509089],[-119.560591695,37.1158450890001],[-119.565259696,37.115831089],[-119.568272697,37.1196520890001],[-119.565612696,37.1232290890001],[-119.563369696,37.12949509],[-119.563593698,37.1371150910001],[-119.562174697,37.141414092],[-119.556451697,37.143845092],[-119.549700695,37.144256092],[-119.541812694,37.1377110920001],[-119.536045692,37.133897092],[-119.52927169,37.129890092],[-119.52678669,37.1284160930001],[-119.523310689,37.129912093],[-119.52256669,37.132790093],[-119.51952869,37.1400070940001],[-119.517484691,37.1467770950001],[-119.51113969,37.149284095],[-119.504979689,37.1496140960001],[-119.502737688,37.1467470960001],[-119.495391687,37.1426780960001],[-119.489895685,37.1384180960001],[-119.489747685,37.133458095],[-119.491753684,37.1285830950001],[-119.492925684,37.1234750940001],[-119.488406682,37.117073094],[-119.485010682,37.112343094],[-119.477675681,37.110230094],[-119.472216679,37.110448095],[-119.468204679,37.1163610950001],[-119.466253679,37.120123096],[-119.467297681,37.1222760960001],[-119.468737681,37.127644096],[-119.465670681,37.1349430970001],[-119.463265682,37.140858098],[-119.460408682,37.145244099],[-119.45690268,37.144810099],[-119.45328468,37.144403099],[-119.447117679,37.1444190990001],[-119.436575677,37.1461781],[-119.432997678,37.156505102],[-119.421137676,37.1639171030001],[-119.411111675,37.161836104],[-119.404047674,37.1570031040001],[-119.401231672,37.151777103],[-119.38944967,37.1492601040001],[-119.385519669,37.1512601050001],[-119.381708669,37.154354105],[-119.377131669,37.1564091060001],[-119.375370669,37.159961106],[-119.37578467,37.1617671060001],[-119.374651669,37.1643541060001],[-119.372319669,37.1648781070001],[-119.367153668,37.1652101070001],[-119.363187668,37.1669251070001],[-119.360465668,37.1704981080001],[-119.360694668,37.1755841090001],[-119.360577669,37.180544109],[-119.357312669,37.1832981100001],[-119.354602668,37.1853081100001],[-119.350278668,37.18639711],[-119.346654668,37.1873281100001],[-119.342569667,37.1897121110001],[-119.340230666,37.1924851110001],[-119.339029667,37.194918112],[-119.338259667,37.1980111120001],[-119.337059667,37.2005981120001],[-119.333131667,37.203716113],[-119.330427667,37.2065431140001],[-119.329530666,37.210241114],[-119.333917668,37.2160571150001],[-119.336672669,37.217400114],[-119.33716967,37.220170114],[-119.336329669,37.2212791150001],[-119.333678669,37.2248341150001],[-119.332927669,37.2297001150001],[-119.33215967,37.233921116],[-119.332062671,37.237651117],[-119.32915867,37.2421661170001],[-119.32294767,37.2454561180001],[-119.32242167,37.2499521190001],[-119.32302967,37.2551731190001],[-119.324653672,37.259709119],[-119.324579671,37.26337512],[-119.325142672,37.2664551190001],[-119.326722674,37.27029012],[-119.331431674,37.27301012],[-119.332023675,37.2755381200001],[-119.331264675,37.281178121],[-119.329731675,37.284462121],[-119.328048675,37.287888122],[-119.326982676,37.290995122],[-119.328259676,37.2951491220001],[-119.329745676,37.2997081230001],[-119.332153678,37.302878123],[-119.334322678,37.3063021230001],[-119.332309679,37.3151331240001],[-119.327521678,37.318269124],[-119.324684678,37.320585125],[-119.321204678,37.3207591250001],[-119.317880677,37.3219901250001],[-119.315595677,37.325764126],[-119.318987678,37.3296001260001],[-119.323047679,37.331654126],[-119.317712679,37.3376541270001],[-119.315383679,37.3458191280001],[-119.31039768,37.354276129],[-119.297496679,37.3656621320001],[-119.286508678,37.375077133],[-119.243616675,37.40902514],[-119.195921671,37.446962146],[-119.136292666,37.4950281550001],[-119.107432664,37.518073159],[-119.035328659,37.57543717],[-119.022375658,37.585742172],[-119.002274653,37.5711421710001],[-118.984873649,37.567342173],[-118.976972647,37.5568421720001],[-118.952673644,37.5658411750001],[-118.929672639,37.548941174],[-118.917072636,37.5503411760001],[-118.901171631,37.531241175],[-118.883670627,37.520141175],[-118.881670625,37.5103411750001],[-118.860770622,37.5015401750001],[-118.850486616,37.475801173],[-118.815538612,37.4878121770001],[-118.797109609,37.4887171780001],[-118.775026603,37.4630571770001],[-118.768958601,37.4581401770001],[-118.758773598,37.4424791770001],[-118.772383598,37.423564173],[-118.783383598,37.405943172],[-118.783656596,37.385198169],[-118.773061592,37.3731831690001],[-118.769878591,37.3641411680001],[-118.784388592,37.3504411650001],[-118.77877659,37.334272164],[-118.760680586,37.329352165],[-118.743556582,37.319112166],[-118.725025579,37.324081167],[-118.704815575,37.3126961680001],[-118.692886571,37.2995971670001],[-118.683148568,37.2848191670001],[-118.674589565,37.2707131650001],[-118.671791562,37.253888164],[-118.682299564,37.2455261630001],[-118.686152562,37.228555161],[-118.67878856,37.2153321600001],[-118.679960558,37.2029451590001],[-118.671031555,37.1923501580001],[-118.666662553,37.1758161560001],[-118.669094552,37.1633851550001],[-118.66152055,37.149223154],[-118.643533545,37.138027154],[-118.627348542,37.1391561550001],[-118.616858541,37.1417201570001],[-118.60703254,37.140017157],[-118.598053537,37.136572157],[-118.594606537,37.137544158],[-118.589877536,37.133287158],[-118.588016534,37.1292011570001],[-118.577659533,37.123228157],[-118.564116529,37.1132131580001],[-118.544660526,37.1147381590001],[-118.531071523,37.1104801600001],[-118.520718521,37.0979861590001],[-118.501573517,37.0925421600001],[-118.482146512,37.07627216],[-118.453123506,37.0673361610001],[-118.436279502,37.0525341600001],[-118.4344995,37.0356701580001],[-118.423452496,37.0202011580001],[-118.420162493,37.006056157],[-118.420145491,36.9894401550001],[-118.403045486,36.962040153],[-118.385444481,36.939239152],[-118.374444476,36.91523915],[-118.366643473,36.8950391490001],[-118.368618471,36.8749391470001],[-118.366571469,36.864962146],[-118.362983467,36.8539701450001],[-118.368189467,36.838852144],[-118.38339647,36.834633141],[-118.391333471,36.833212141],[-118.391140469,36.82097314],[-118.384478467,36.812713139],[-118.377267465,36.8033191390001],[-118.373810464,36.796977139],[-118.375942463,36.788289138],[-118.376442462,36.7773391370001],[-118.373042461,36.762839135],[-118.369642458,36.753639134],[-118.366142457,36.747739134],[-118.361841457,36.7471391350001],[-118.360598456,36.744778135],[-118.555499488,36.744751122],[-118.982453559,36.741651092],[-118.984791551,36.657152083],[-119.088307568,36.6575190770001],[-119.174803583,36.658883071],[-119.250962596,36.6612190660001],[-119.304637604,36.660611062],[-119.305114596,36.5737300540001],[-119.466334622,36.5752430430001],[-119.546109629,36.508993031],[-119.573206631,36.488840027],[-119.666412639,36.4188850150001],[-119.671505641,36.4310790160001],[-119.690483643,36.4258720130001],[-119.705058646,36.4271780130001],[-119.712084646,36.419442012],[-119.747129652,36.416392009],[-119.754225651,36.4020280070001],[-119.959239685,36.4009799930001],[-119.959070662,36.181751972],[-120.315080691,35.907190923],[-120.336381696,35.923112922],[-120.335895698,35.9370949230001],[-120.356525702,35.9480619230001],[-120.359833704,35.963982924],[-120.407834713,35.975741923],[-120.433065717,35.96893792],[-120.449712721,35.9884369210001],[-120.477403727,36.0008289210001],[-120.478710728,36.0101879220001],[-120.540421741,36.0366689200001],[-120.545420742,36.0461279210001],[-120.566661746,36.05293692],[-120.592320752,36.0718859200001],[-120.590142754,36.089807922],[-120.600619756,36.1015919220001],[-120.615172757,36.095165921],[-120.648796765,36.1079949200001],[-120.655738768,36.1317859210001],[-120.66756377,36.138061921],[-120.667997773,36.1605789230001],[-120.654633771,36.1677259250001],[-120.638159771,36.1975439290001],[-120.62706777,36.20304393],[-120.651420776,36.2302519310001],[-120.681765784,36.2507999310001],[-120.678594785,36.2673239330001],[-120.672634786,36.280493934],[-120.682735788,36.2944459350001],[-120.658818787,36.3162399390001],[-120.630021782,36.3169129400001],[-120.596574778,36.3284929440001],[-120.603718795,36.488246958],[-120.918743872,36.74038596],[-120.655962852,36.9528369980001]]]},"attributes":{"OBJECTID":55,"County":"Fresno","Acres":3844565.1470344,"CDL2013Acres":1119632.94943,"CDL2013Owners":11376,"CDL2013MeanAcres":98.4206179175457,"CDL2013Gini":0.778328275568803,"CDL2013PctCrop":0.291224860708539,"CDL2013PctOwner":0.00297985160788263,"CDL2016Acres":1142178.687345,"CDL2016Owners":11817,"CDL2016MeanAcres":96.6555544846408,"CDL2016Gini":0.780230048608846,"CDL2016PctCrop":0.297089174890441,"CDL2016PctOwners":0.00307518279515168,"GAPAcres":687351.556205,"GAPOwners":8754,"GAPMeanAcres":78.5185693631483,"GAPGini":0.890630531670078,"GAPPctCrop":0.178785253966942,"GAPPctOwners":0.0077896802238092,"CDL201325th":8.228615,"CDL2013Median":20.01555,"CDL201375th":62.71539,"CDL201625th":7.783825,"CDL2016Median":19.57076,"CDL201675th":60.04665,"GAP25th":4.00311,"GAPMedian":7.783825,"GAP75th":21.34992,"Shape__Area":1.57033273238812,"Shape__Length":8.23388399361829}};

                $(".center").hide();
                $('#sidebarGap').hide();
                $('#sidebar2016').hide();
                $('#cdlGraphs').hide();
                $('#cdlGraphs2016').hide();
                $('#gapGraphs').hide();
                $('#cdlMap').hide();
                $('#cdlMap2016').hide();
                $('#gapMap').hide();
                $('#cdlSummary').hide();
                $('#cdlLandClass').hide();
                $('#cdlPieChart').hide();
                $('#cdlBarChart').hide();
                $('#cdlCumAcres').hide();
                $('#cdlDataTable').hide();
                $('#cdlSummary2016').hide();
                $('#cdlLandClass2016').hide();
                $('#cdlPieChart2016').hide();
                $('#cdlBarChart2016').hide();
                $('#cdlCumAcres2016').hide();
                $('#cdlDataTable2016').hide();
                $('#gapSummary').hide();
                $('#gapLandClass').hide();
                $('#gapPieChart').hide();
                $('#gapBarChart').hide();
                $('#gapCumAcres').hide();
                $('#gapDataTable').hide();
                $('#gapToggle').hide();
                $('#cdlToggle2016').hide();
                $('#cdlMapToggle').hide();
                $('#cdlMapToggle2016').hide();
                $('#gapMapToggle').hide();

                d3.select("#CountyName").select("text").remove();
                d3.select("#CountyName").append("text")
                    .text("Please click a county on the state-level map to begin");

                d3.select("#CountyNameGap").select("text").remove();
                d3.select("#CountyNameGap").append("text")
                    .text("Please click a county on the state-level map to begin");

                clicked2(FresnoJSON);

                //introJs().setOption('showProgress', true).start();

                var introguide = introJs();


                // and check for it when deciding whether to start.
                window.addEventListener('load', function () {
                    var doneTour = localStorage.getItem('EventTour') === 'Completed';
                    if (doneTour) {
                        return;
                    }
                    else {
                        introguide.setOption('showProgress', true).start()

                        introguide.oncomplete(function () {
                            localStorage.setItem('EventTour', 'Completed');
                        });

                        introguide.onexit(function () {
                            localStorage.setItem('EventTour', 'Completed');
                        });
                    }
                });

                function cdlCumAcres(objectID) {

                    var AlfalfaHay = [];
                    var Almonds = [];
                    var Corn = [];
                    var Cotton = [];
                    var Fallow = [];
                    var FruitTrees = [];
                    var GrainCrops = [];
                    var Grapes = [];
                    var OtherTreeCrops = [];
                    var Rice = [];
                    var Tomatoes = [];
                    var VegsFruits = [];
                    var Walnuts = [];
                    var WinterWheat = [];
                    var data = [];

                    $.getJSON("https://services.arcgis.com/0xnwbwUttaTjns4i/arcgis/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=1&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=true&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        if (datajson.relatedRecordGroups[0].count <= 30000){

                            $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=1&outFields=*&definitionExpression=&orderByFields=PropertySize&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                                $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {

                                    switch (val.attributes.Class) {
                                        case "Alfalfa & Hay":
                                            AlfalfaHay.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Almonds":
                                            Almonds.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Corn":
                                            Corn.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Cotton":
                                            Cotton.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fallow":
                                            Fallow.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fruit Trees":
                                            FruitTrees.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grain Crops":
                                            GrainCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grapes":
                                            Grapes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Other Tree Crops":
                                            OtherTreeCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Rice":
                                            Rice.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Tomatoes":
                                            Tomatoes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Vegs & Fruits":
                                            VegsFruits.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Walnuts":
                                            Walnuts.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Winter Wheat":
                                            WinterWheat.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                    }
                                })

                                if (AlfalfaHay.length > 0) {
                                    data.push({
                                        data: AlfalfaHay,
                                        name: "Alfalfa",
                                        color: "#DEBB27"
                                    })
                                }
                                if (Almonds.length > 0) {
                                    data.push({
                                        data: Almonds,
                                        name: "Almonds",
                                        color: "#84784f"
                                    })
                                }
                                if (Corn.length > 0) {
                                    data.push({
                                        data: Corn,
                                        name: "Corn",
                                        color: "#f9f900"
                                    })
                                }
                                if (Cotton.length > 0) {
                                    data.push({
                                        data: Cotton,
                                        name: "Cotton",
                                        color: "#dbdbdb"
                                    })
                                }
                                if (Fallow.length > 0) {
                                    data.push({
                                        data: Fallow,
                                        name: "Fallow",
                                        color: "#562c0a"
                                    })
                                }
                                if (FruitTrees.length > 0) {
                                    data.push({
                                        data: FruitTrees,
                                        name: "Fruit Trees",
                                        color: "#f97020"
                                    })
                                }
                                if (GrainCrops.length > 0) {
                                    data.push({
                                        data: GrainCrops,
                                        name: "Grain",
                                        color: "#8eeaff"
                                    })
                                }
                                if (Grapes.length > 0) {
                                    data.push({
                                        data: Grapes,
                                        name: "Grapes",
                                        color: "#7f00ff"
                                    })
                                }
                                if (OtherTreeCrops.length > 0) {
                                    data.push({
                                        data: OtherTreeCrops,
                                        name: "Other Trees",
                                        color: "#48CA3B"
                                    })
                                }
                                if (Rice.length > 0) {
                                    data.push({
                                        data: Rice,
                                        name: "Rice",
                                        color: "#0083ff"
                                    })
                                }
                                if (Tomatoes.length > 0) {
                                    data.push({
                                        data: Tomatoes,
                                        name: "Tomatoes",
                                        color: "#ff0000"
                                    })
                                }
                                if (VegsFruits.length > 0) {
                                    data.push({
                                        data: VegsFruits,
                                        name: "Vegs Fruits",
                                        color: "#016d06"
                                    })
                                }
                                if (Walnuts.length > 0) {
                                    data.push({
                                        data: Walnuts,
                                        name: "Walnuts",
                                        color: "#f59bff"
                                    })
                                }
                                if (WinterWheat.length > 0) {
                                    data.push({
                                        data: WinterWheat,
                                        name: "Winter Wheat",
                                        color: "#05006d"
                                    })
                                }

                                Highcharts.chart('cum-acres-chart', {

                                    title: {
                                        text: null
                                    },

                                    yAxis: {
                                        title: {
                                            text: 'Cumulative Acres'
                                        }
                                    },
                                    xAxis: {
                                        title: {
                                            text: 'Property Size (acres)'
                                        }
                                    },
                                    legend: {
                                        layout: 'vertical',
                                        align: 'right',
                                        verticalAlign: 'middle'
                                    },

                                    plotOptions: {
                                        series: {
                                            label: {
                                                connectorAllowed: false
                                            }
                                        }
                                    },

                                    series: data,

                                    responsive: {
                                        rules: [{
                                            condition: {
                                                maxWidth: 500
                                            },
                                            chartOptions: {
                                                legend: {
                                                    layout: 'horizontal',
                                                    align: 'center',
                                                    verticalAlign: 'bottom'
                                                }
                                            }
                                        }]
                                    },
                                    credits: {
                                        enabled: false
                                    },

                                    exporting: {
                                        filename: countyName + 'CropCumAcres'
                                    }

                                });
                            })
                        } else {

                            $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=1&outFields=*&definitionExpression=&orderByFields=PropertySize&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=0&resultRecordCount=30000&f=pjson&token=", function(datajson) {

                                $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {

                                    switch (val.attributes.Class) {
                                        case "Alfalfa & Hay":
                                            AlfalfaHay.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Almonds":
                                            Almonds.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Corn":
                                            Corn.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Cotton":
                                            Cotton.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fallow":
                                            Fallow.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fruit Trees":
                                            FruitTrees.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grain Crops":
                                            GrainCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grapes":
                                            Grapes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Other Tree Crops":
                                            OtherTreeCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Rice":
                                            Rice.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Tomatoes":
                                            Tomatoes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Vegs & Fruits":
                                            VegsFruits.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Walnuts":
                                            Walnuts.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Winter Wheat":
                                            WinterWheat.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                    }
                                })

                                $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=1&outFields=*&definitionExpression=&orderByFields=PropertySize&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=30000&resultRecordCount=30000&f=pjson&token=", function(datajson) {

                                    $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {

                                        switch (val.attributes.Class) {
                                            case "Alfalfa & Hay":
                                                AlfalfaHay.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Almonds":
                                                Almonds.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Corn":
                                                Corn.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Cotton":
                                                Cotton.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Fallow":
                                                Fallow.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Fruit Trees":
                                                FruitTrees.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Grain Crops":
                                                GrainCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Grapes":
                                                Grapes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Other Tree Crops":
                                                OtherTreeCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Rice":
                                                Rice.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Tomatoes":
                                                Tomatoes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Vegs & Fruits":
                                                VegsFruits.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Walnuts":
                                                Walnuts.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Winter Wheat":
                                                WinterWheat.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                        }
                                    })

                                    if (AlfalfaHay.length > 0) {
                                        data.push({
                                            data: AlfalfaHay,
                                            name: "Alfalfa",
                                            color: "#DEBB27"
                                        })
                                    }
                                    if (Almonds.length > 0) {
                                        data.push({
                                            data: Almonds,
                                            name: "Almonds",
                                            color: "#84784f"
                                        })
                                    }
                                    if (Corn.length > 0) {
                                        data.push({
                                            data: Corn,
                                            name: "Corn",
                                            color: "#f9f900"
                                        })
                                    }
                                    if (Cotton.length > 0) {
                                        data.push({
                                            data: Cotton,
                                            name: "Cotton",
                                            color: "#dbdbdb"
                                        })
                                    }
                                    if (Fallow.length > 0) {
                                        data.push({
                                            data: Fallow,
                                            name: "Fallow",
                                            color: "#562c0a"
                                        })
                                    }
                                    if (FruitTrees.length > 0) {
                                        data.push({
                                            data: FruitTrees,
                                            name: "Fruit Trees",
                                            color: "#f97020"
                                        })
                                    }
                                    if (GrainCrops.length > 0) {
                                        data.push({
                                            data: GrainCrops,
                                            name: "Grain",
                                            color: "#8eeaff"
                                        })
                                    }
                                    if (Grapes.length > 0) {
                                        data.push({
                                            data: Grapes,
                                            name: "Grapes",
                                            color: "#7f00ff"
                                        })
                                    }
                                    if (OtherTreeCrops.length > 0) {
                                        data.push({
                                            data: OtherTreeCrops,
                                            name: "Other Trees",
                                            color: "#48CA3B"
                                        })
                                    }
                                    if (Rice.length > 0) {
                                        data.push({
                                            data: Rice,
                                            name: "Rice",
                                            color: "#0083ff"
                                        })
                                    }
                                    if (Tomatoes.length > 0) {
                                        data.push({
                                            data: Tomatoes,
                                            name: "Tomatoes",
                                            color: "#ff0000"
                                        })
                                    }
                                    if (VegsFruits.length > 0) {
                                        data.push({
                                            data: VegsFruits,
                                            name: "Vegs Fruits",
                                            color: "#016d06"
                                        })
                                    }
                                    if (Walnuts.length > 0) {
                                        data.push({
                                            data: Walnuts,
                                            name: "Walnuts",
                                            color: "#f59bff"
                                        })
                                    }
                                    if (WinterWheat.length > 0) {
                                        data.push({
                                            data: WinterWheat,
                                            name: "Winter Wheat",
                                            color: "#05006d"
                                        })
                                    }

                                    Highcharts.chart('cum-acres-chart', {

                                        title: {
                                            text: null
                                        },

                                        yAxis: {
                                            title: {
                                                text: 'Cumulative Acres'
                                            }
                                        },
                                        xAxis: {
                                            title: {
                                                text: 'Property Size (acres)'
                                            }
                                        },
                                        legend: {
                                            layout: 'vertical',
                                            align: 'right',
                                            verticalAlign: 'middle'
                                        },

                                        plotOptions: {
                                            series: {
                                                label: {
                                                    connectorAllowed: false
                                                }
                                            }
                                        },

                                        series: data,

                                        responsive: {
                                            rules: [{
                                                condition: {
                                                    maxWidth: 500
                                                },
                                                chartOptions: {
                                                    legend: {
                                                        layout: 'horizontal',
                                                        align: 'center',
                                                        verticalAlign: 'bottom'
                                                    }
                                                }
                                            }]
                                        },
                                        credits: {
                                            enabled: false
                                        },

                                        exporting: {
                                            filename: countyName + 'CropCumAcres'
                                        }

                                    })
                                })
                            })
                        }
                    })

                };

                function cdlCumAcres2016(objectID) {

                    var AlfalfaHay = [];
                    var Almonds = [];
                    var Corn = [];
                    var Cotton = [];
                    var Fallow = [];
                    var FruitTrees = [];
                    var GrainCrops = [];
                    var Grapes = [];
                    var OtherTreeCrops = [];
                    var Rice = [];
                    var Tomatoes = [];
                    var VegsFruits = [];
                    var Walnuts = [];
                    var WinterWheat = [];
                    var data = [];

                    $.getJSON("https://services.arcgis.com/0xnwbwUttaTjns4i/arcgis/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=2&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=true&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        if (datajson.relatedRecordGroups[0].count <= 30000){

                            $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=2&outFields=*&definitionExpression=&orderByFields=PropertySize&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                                $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {

                                    switch (val.attributes.Class) {
                                        case "Alfalfa & Hay":
                                            AlfalfaHay.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Almonds":
                                            Almonds.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Corn":
                                            Corn.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Cotton":
                                            Cotton.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fallow":
                                            Fallow.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fruit Trees":
                                            FruitTrees.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grain Crops":
                                            GrainCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grapes":
                                            Grapes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Other Tree Crops":
                                            OtherTreeCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Rice":
                                            Rice.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Tomatoes":
                                            Tomatoes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Vegs & Fruits":
                                            VegsFruits.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Walnuts":
                                            Walnuts.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Winter Wheat":
                                            WinterWheat.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                    }
                                })

                                if (AlfalfaHay.length > 0) {
                                    data.push({
                                        data: AlfalfaHay,
                                        name: "Alfalfa",
                                        color: "#DEBB27"
                                    })
                                }
                                if (Almonds.length > 0) {
                                    data.push({
                                        data: Almonds,
                                        name: "Almonds",
                                        color: "#84784f"
                                    })
                                }
                                if (Corn.length > 0) {
                                    data.push({
                                        data: Corn,
                                        name: "Corn",
                                        color: "#f9f900"
                                    })
                                }
                                if (Cotton.length > 0) {
                                    data.push({
                                        data: Cotton,
                                        name: "Cotton",
                                        color: "#dbdbdb"
                                    })
                                }
                                if (Fallow.length > 0) {
                                    data.push({
                                        data: Fallow,
                                        name: "Fallow",
                                        color: "#562c0a"
                                    })
                                }
                                if (FruitTrees.length > 0) {
                                    data.push({
                                        data: FruitTrees,
                                        name: "Fruit Trees",
                                        color: "#f97020"
                                    })
                                }
                                if (GrainCrops.length > 0) {
                                    data.push({
                                        data: GrainCrops,
                                        name: "Grain",
                                        color: "#8eeaff"
                                    })
                                }
                                if (Grapes.length > 0) {
                                    data.push({
                                        data: Grapes,
                                        name: "Grapes",
                                        color: "#7f00ff"
                                    })
                                }
                                if (OtherTreeCrops.length > 0) {
                                    data.push({
                                        data: OtherTreeCrops,
                                        name: "Other Trees",
                                        color: "#48CA3B"
                                    })
                                }
                                if (Rice.length > 0) {
                                    data.push({
                                        data: Rice,
                                        name: "Rice",
                                        color: "#0083ff"
                                    })
                                }
                                if (Tomatoes.length > 0) {
                                    data.push({
                                        data: Tomatoes,
                                        name: "Tomatoes",
                                        color: "#ff0000"
                                    })
                                }
                                if (VegsFruits.length > 0) {
                                    data.push({
                                        data: VegsFruits,
                                        name: "Vegs Fruits",
                                        color: "#016d06"
                                    })
                                }
                                if (Walnuts.length > 0) {
                                    data.push({
                                        data: Walnuts,
                                        name: "Walnuts",
                                        color: "#f59bff"
                                    })
                                }
                                if (WinterWheat.length > 0) {
                                    data.push({
                                        data: WinterWheat,
                                        name: "Winter Wheat",
                                        color: "#05006d"
                                    })
                                }

                                Highcharts.chart('cum-acres-chart2016', {

                                    title: {
                                        text: null
                                    },

                                    yAxis: {
                                        title: {
                                            text: 'Cumulative Acres'
                                        }
                                    },
                                    xAxis: {
                                        title: {
                                            text: 'Property Size (acres)'
                                        }
                                    },
                                    legend: {
                                        layout: 'vertical',
                                        align: 'right',
                                        verticalAlign: 'middle'
                                    },

                                    plotOptions: {
                                        series: {
                                            label: {
                                                connectorAllowed: false
                                            }
                                        }
                                    },

                                    series: data,

                                    responsive: {
                                        rules: [{
                                            condition: {
                                                maxWidth: 500
                                            },
                                            chartOptions: {
                                                legend: {
                                                    layout: 'horizontal',
                                                    align: 'center',
                                                    verticalAlign: 'bottom'
                                                }
                                            }
                                        }]
                                    },
                                    credits: {
                                        enabled: false
                                    },

                                    exporting: {
                                        filename: countyName + 'CropCumAcres'
                                    }

                                });
                            })
                        } else {

                            $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=2&outFields=*&definitionExpression=&orderByFields=PropertySize&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=0&resultRecordCount=30000&f=pjson&token=", function(datajson) {

                                $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {

                                    switch (val.attributes.Class) {
                                        case "Alfalfa & Hay":
                                            AlfalfaHay.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Almonds":
                                            Almonds.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Corn":
                                            Corn.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Cotton":
                                            Cotton.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fallow":
                                            Fallow.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Fruit Trees":
                                            FruitTrees.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grain Crops":
                                            GrainCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Grapes":
                                            Grapes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Other Tree Crops":
                                            OtherTreeCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Rice":
                                            Rice.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Tomatoes":
                                            Tomatoes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Vegs & Fruits":
                                            VegsFruits.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Walnuts":
                                            Walnuts.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                        case "Winter Wheat":
                                            WinterWheat.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                            break;
                                    }
                                })

                                $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=2&outFields=*&definitionExpression=&orderByFields=PropertySize&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=30000&resultRecordCount=30000&f=pjson&token=", function(datajson) {

                                    $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {

                                        switch (val.attributes.Class) {
                                            case "Alfalfa & Hay":
                                                AlfalfaHay.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Almonds":
                                                Almonds.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Corn":
                                                Corn.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Cotton":
                                                Cotton.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Fallow":
                                                Fallow.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Fruit Trees":
                                                FruitTrees.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Grain Crops":
                                                GrainCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Grapes":
                                                Grapes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Other Tree Crops":
                                                OtherTreeCrops.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Rice":
                                                Rice.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Tomatoes":
                                                Tomatoes.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Vegs & Fruits":
                                                VegsFruits.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Walnuts":
                                                Walnuts.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                            case "Winter Wheat":
                                                WinterWheat.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                                break;
                                        }
                                    })

                                    if (AlfalfaHay.length > 0) {
                                        data.push({
                                            data: AlfalfaHay,
                                            name: "Alfalfa",
                                            color: "#DEBB27"
                                        })
                                    }
                                    if (Almonds.length > 0) {
                                        data.push({
                                            data: Almonds,
                                            name: "Almonds",
                                            color: "#84784f"
                                        })
                                    }
                                    if (Corn.length > 0) {
                                        data.push({
                                            data: Corn,
                                            name: "Corn",
                                            color: "#f9f900"
                                        })
                                    }
                                    if (Cotton.length > 0) {
                                        data.push({
                                            data: Cotton,
                                            name: "Cotton",
                                            color: "#dbdbdb"
                                        })
                                    }
                                    if (Fallow.length > 0) {
                                        data.push({
                                            data: Fallow,
                                            name: "Fallow",
                                            color: "#562c0a"
                                        })
                                    }
                                    if (FruitTrees.length > 0) {
                                        data.push({
                                            data: FruitTrees,
                                            name: "Fruit Trees",
                                            color: "#f97020"
                                        })
                                    }
                                    if (GrainCrops.length > 0) {
                                        data.push({
                                            data: GrainCrops,
                                            name: "Grain",
                                            color: "#8eeaff"
                                        })
                                    }
                                    if (Grapes.length > 0) {
                                        data.push({
                                            data: Grapes,
                                            name: "Grapes",
                                            color: "#7f00ff"
                                        })
                                    }
                                    if (OtherTreeCrops.length > 0) {
                                        data.push({
                                            data: OtherTreeCrops,
                                            name: "Other Trees",
                                            color: "#48CA3B"
                                        })
                                    }
                                    if (Rice.length > 0) {
                                        data.push({
                                            data: Rice,
                                            name: "Rice",
                                            color: "#0083ff"
                                        })
                                    }
                                    if (Tomatoes.length > 0) {
                                        data.push({
                                            data: Tomatoes,
                                            name: "Tomatoes",
                                            color: "#ff0000"
                                        })
                                    }
                                    if (VegsFruits.length > 0) {
                                        data.push({
                                            data: VegsFruits,
                                            name: "Vegs Fruits",
                                            color: "#016d06"
                                        })
                                    }
                                    if (Walnuts.length > 0) {
                                        data.push({
                                            data: Walnuts,
                                            name: "Walnuts",
                                            color: "#f59bff"
                                        })
                                    }
                                    if (WinterWheat.length > 0) {
                                        data.push({
                                            data: WinterWheat,
                                            name: "Winter Wheat",
                                            color: "#05006d"
                                        })
                                    }

                                    Highcharts.chart('cum-acres-chart2016', {

                                        title: {
                                            text: null
                                        },

                                        yAxis: {
                                            title: {
                                                text: 'Cumulative Acres'
                                            }
                                        },
                                        xAxis: {
                                            title: {
                                                text: 'Property Size (acres)'
                                            }
                                        },
                                        legend: {
                                            layout: 'vertical',
                                            align: 'right',
                                            verticalAlign: 'middle'
                                        },

                                        plotOptions: {
                                            series: {
                                                label: {
                                                    connectorAllowed: false
                                                }
                                            }
                                        },

                                        series: data,

                                        responsive: {
                                            rules: [{
                                                condition: {
                                                    maxWidth: 500
                                                },
                                                chartOptions: {
                                                    legend: {
                                                        layout: 'horizontal',
                                                        align: 'center',
                                                        verticalAlign: 'bottom'
                                                    }
                                                }
                                            }]
                                        },
                                        credits: {
                                            enabled: false
                                        },

                                        exporting: {
                                            filename: countyName + 'CropCumAcres'
                                        }

                                    })
                                })
                            })
                        }
                    })

                };

                function gapCumAcres(objectID) {

                    var Barren = [];
                    var CoolSemiDesert = [];
                    var Urban = [];
                    var Introduced = [];
                    var MedScrub = [];
                    var MedTemp = [];
                    var Water = [];
                    var Polar = [];
                    var Saltwater = [];
                    var SemiDesert = [];
                    var TempAlpine = [];
                    var TempShrub = [];
                    var TempForest = [];
                    var WarmSemiDesert = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=6&outFields=*&definitionExpression=&orderByFields=PropertySize&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {

                            switch (val.attributes.Class) {
                                case "Barren":
                                    Barren.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Cool Semi-Desert Scrub & Grassland":
                                    CoolSemiDesert.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Developed & Urban":
                                    Urban.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Introduced & Semi Natural Vegetation":
                                    Introduced.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Mediterranean Scrub & Grassland":
                                    MedScrub.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Mediterranean, Temperate & Boreal Nonvascular & Sparse Vegetation":
                                    MedTemp.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Open Water":
                                    Water.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Polar & High Montane Nonvascular & Sparse Vegetation":
                                    Polar.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Saltwater Aquatic Vegetation":
                                    Saltwater.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Semi-Desert Nonvascular & Sparse Vascular Vegetation":
                                    SemiDesert.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Temperate & Boreal Alpine Vegetation":
                                    TempAlpine.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Temperate & Boreal Shrubland & Grassland":
                                    TempShrub.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Temperate Forest":
                                    TempForest.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                                case "Warm Semi-Desert Scrub & Grassland":
                                    WarmSemiDesert.push([parseFloat(f(val.attributes.PropertySize)), parseFloat(f(val.attributes.CumulativeAcres))]);
                                    break;
                            }
                        });

                        var data = [];

                        if (Barren.length > 0) {
                            data.push({
                                data: Barren,
                                name: "Barren",
                                color: "#606060"
                            })
                        }
                        if (CoolSemiDesert.length > 0) {
                            data.push({
                                data: CoolSemiDesert,
                                name: "CoolSemiDesert",
                                color: "#d6c482"
                            })
                        }
                        if (Urban.length > 0) {
                            data.push({
                                data: Urban,
                                name: "Urban",
                                color: "#9b3434"
                            })
                        }
                        if (Introduced.length > 0) {
                            data.push({
                                data: Introduced,
                                name: "Introduced",
                                color: "#ff0000"
                            })
                        }
                        if (MedScrub.length > 0) {
                            data.push({
                                data: MedScrub,
                                name: "MedScrub",
                                color: "#849148"
                            })
                        }
                        if (MedTemp.length > 0) {
                            data.push({
                                data: MedTemp,
                                name: "MedTemp",
                                color: "#efcf77"
                            })
                        }
                        if (Water.length > 0) {
                            data.push({
                                data: Water,
                                name: "OpenWater",
                                color: "#0000ff"
                            })
                        }
                        if (Polar.length > 0) {
                            data.push({
                                data: Polar,
                                name: "HighMontane",
                                color: "#ffffff"
                            })
                        }
                        if (Saltwater.length > 0) {
                            data.push({
                                data: Saltwater,
                                name: "SaltwaterVeg",
                                color: "#344870"
                            })
                        }
                        if (SemiDesert.length > 0) {
                            data.push({
                                data: SemiDesert,
                                name: "SemiDesert",
                                color: "#ddb8d0"
                            })
                        }
                        if (TempAlpine.length > 0) {
                            data.push({
                                data: TempAlpine,
                                name: "TempAlpine",
                                color: "#c9e2a3"
                            })
                        }
                        if (TempShrub.length > 0) {
                            data.push({
                                data: TempShrub,
                                name: "TempShrub",
                                color: "#559148"
                            })
                        }
                        if (TempForest.length > 0) {
                            data.push({
                                data: TempForest,
                                name: "TempForest",
                                color: "#019b04"
                            })
                        }
                        if (WarmSemiDesert.length > 0) {
                            data.push({
                                data: WarmSemiDesert,
                                name: "WarmSemiDesert",
                                color: "#9e8c4f"
                            })
                        }

                        Highcharts.chart('cum-acres-charts-Gap', {

                            title: {
                                text: null
                            },

                            yAxis: {
                                title: {
                                    text: 'Cumulative Acres'
                                }
                            },
                            xAxis: {
                                title: {
                                    text: 'Property Size (acres)'
                                }
                            },
                            legend: {
                                layout: 'vertical',
                                align: 'right',
                                verticalAlign: 'middle'
                            },

                            plotOptions: {
                                series: {
                                    label: {
                                        connectorAllowed: false
                                    }
                                }
                            },

                            series: data,

                            responsive: {
                                rules: [{
                                    condition: {
                                        maxWidth: 500
                                    },
                                    chartOptions: {
                                        legend: {
                                            layout: 'horizontal',
                                            align: 'center',
                                            verticalAlign: 'bottom'
                                        }
                                    }
                                }]
                            },
                            credits: {
                                enabled: false
                            },

                            exporting: {
                                filename: countyName + 'FRCumAcres'
                            }

                        });
                    });

                };

                function cdlLandClass(objectID) {

                    var data1 = [];

                    var ticks = [];

                    var color1 = [];

                    tableData = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=8&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        var trHTML = '';

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(i, val) {

                            trHTML += '<tr><td>' + val.attributes.Class + '</td><td>' + f(val.attributes.Sum_) + '</td><td>' + p(val.attributes.PercentCounty) + '</td><td>' + val.attributes.Count_ + '</td><td>' + f(val.attributes.Mean) + '</td><td>' + f(val.attributes.Gini) + '</td></tr>';
                        });

                        $('#dataTable tbody tr').remove();
                        $('#dataTable tbody').append(trHTML);
                        $.bootstrapSortable(true, undefined, 'default');

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            val.attributes.label = val.attributes.Class;
                            val.attributes.data = parseFloat(f(val.attributes.PercentCounty * 100));
                            var color = "#48CA3B";
                            switch (val.attributes.Class) {
                                case "Grain Crops":
                                    color = "#8eeaff";
                                    break;
                                case "Almonds":
                                    color = "#84784f";
                                    break;
                                case "Corn":
                                    color = "#f9f900";
                                    break;
                                case "Cotton":
                                    color = "#dbdbdb";
                                    break;
                                case "Fruit Trees":
                                    color = "#f97020";
                                    break;
                                case "Grapes":
                                    color = "#7f00ff";
                                    break;
                                case "Rice":
                                    color = "#0083ff";
                                    break;
                                case "Tomatoes":
                                    color = "#ff0000";
                                    break;
                                case "Vegs & Fruits":
                                    color = "#016d06";
                                    break;
                                case "Walnuts":
                                    color = "#f59bff";
                                    break;
                                case "Winter Wheat":
                                    color = "#05006d";
                                    break;
                                case "Fallow":
                                    color = "#562c0a";
                                    break;
                                case "Deciduous Forest":
                                    color = "#199301";
                                    break;
                                case "Evergreen Forest":
                                    color = "#0e5100";
                                    break;
                                case "Grassland":
                                    color = "#94a843";
                                    break;
                                case "High Intensity Developed":
                                    color = "#700101";
                                    break;
                                case "Low Intensity Developed":
                                    color = "#fc8f8f";
                                    break;
                                case "Mixed Forest":
                                    color = "#287a30";
                                    break;
                                case "Shrubland":
                                    color = "#686b3e";
                                    break;
                                case "Water":
                                    color = "#0a00ce";
                                    break;
                                case "Wetlands":
                                    color = "#3b3872";
                                    break;
                                case "Alfalfa & Hay":
                                    color = "#DEBB27";
                                    break;
                                case "Barren":
                                    color = "#474747";
                                    break;
                            }
                            val.attributes.color = color;

                            color1.push(val.attributes.color);
                            data1.push([val.attributes.label, val.attributes.data]);
                            tableData.push(val.attributes);
                        });

                        Highcharts.chart('LandClass-Bar-Chart', {
                            chart: {
                                type: 'bar'
                            },
                            title: {
                                text: null
                            },
                            xAxis: {
                                type: 'category',
                                labels: {
                                    rotation: 0,
                                    style: {
                                        fontSize: '10px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: null
                                },
                                labels: {
                                    format: '{value}%'
                                }
                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: '<b>{point.y:.1f}%</b>'
                            },
                            series: [{
                                data: data1
                            }],
                            plotOptions:{
                                bar: {
                                    colorByPoint: true,
                                    colors: color1,
                                    events: {
                                        click: function(e) {
                                            var href = e.point.name;

                                            switch (href) {
                                                case "Evergreen Forest":
                                                    layer.set("renderingRule", colorEvergreen);
                                                    break;
                                                case "Shrubland":
                                                    layer.set("renderingRule", colorShrubland);
                                                    break;
                                                case "Grassland":
                                                    layer.set("renderingRule", colorGrassland);
                                                    break;
                                                case "Corn":
                                                    layer.set("renderingRule", colorCorn);
                                                    break;
                                                case "Cotton":
                                                    layer.set("renderingRule", colorCotton);
                                                    break;
                                                case "Rice":
                                                    layer.set("renderingRule", colorRice);
                                                    break;
                                                case "Grain Crops":
                                                    layer.set("renderingRule", colorGrain);
                                                    break;
                                                case "Vegs & Fruits":
                                                    layer.set("renderingRule", colorVeg);
                                                    break;
                                                case "Winter Wheat":
                                                    layer.set("renderingRule", colorWheat);
                                                    break;
                                                case "Alfalfa & Hay":
                                                    layer.set("renderingRule", colorAlfalfa);
                                                    break;
                                                case "Tomatoes":
                                                    layer.set("renderingRule", colorTomato);
                                                    break;
                                                case "Fallow":
                                                    layer.set("renderingRule", colorFallow);
                                                    break;
                                                case "Fruit Trees":
                                                    layer.set("renderingRule", colorFruit);
                                                    break;
                                                case "Grapes":
                                                    layer.set("renderingRule", colorGrape);
                                                    break;
                                                case "Other Tree Crops":
                                                    layer.set("renderingRule", colorOther);
                                                    break;
                                                case "Almonds":
                                                    layer.set("renderingRule", colorAlmond);
                                                    break;
                                                case "Walnuts":
                                                    layer.set("renderingRule", colorWalnut);
                                                    break;
                                                case "Water":
                                                    layer.set("renderingRule", colorWater);
                                                    break;
                                                case "Perennial Ice/Snow":
                                                    layer.set("renderingRule", colorIce);
                                                    break;
                                                case "Low Intensity Developed":
                                                    layer.set("renderingRule", colorLowDev);
                                                    break;
                                                case "Barren":
                                                    layer.set("renderingRule", colorBarren);
                                                    break;
                                                case "Deciduous Forest":
                                                    layer.set("renderingRule", colorDeciduous);
                                                    break;
                                                case "Mixed Forest":
                                                    layer.set("renderingRule", colorMixed);
                                                    break;
                                                case "Wetlands":
                                                    layer.set("renderingRule", colorWetland);
                                                    break;
                                                case "High Intensity Developed":
                                                    layer.set("renderingRule", colorHighDev);
                                                    break;
                                                default:
                                                    layer.set("renderingRule", colorAll);
                                                    break;
                                            }
                                            //layer.set("renderingRule", colorRF);
                                            layer.set("mosaicRule", mosaicRule);
                                            setTimeout(formatLegend, 500);
                                        }
                                    }
                                }
                            },
                            credits: {
                                enabled: false
                            },

                            exporting: {
                                filename: countyName + 'CropPct'
                            }
                        });
                    });

                };

                function cdlLandClass2016(objectID) {

                    var data1 = [];

                    var ticks = [];

                    var color1 = [];

                    tableData = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=9&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        var trHTML = '';

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(i, val) {

                            trHTML += '<tr><td>' + val.attributes.Class + '</td><td>' + f(val.attributes.Sum_) + '</td><td>' + p(val.attributes.PercentCounty) + '</td><td>' + val.attributes.Count_ + '</td><td>' + f(val.attributes.Mean) + '</td><td>' + f(val.attributes.Gini) + '</td></tr>';
                        });

                        $('#dataTable2016 tbody tr').remove();
                        $('#dataTable2016 tbody').append(trHTML);
                        $.bootstrapSortable(true, undefined, 'default');

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            val.attributes.label = val.attributes.Class;
                            val.attributes.data = parseFloat(f(val.attributes.PercentCounty * 100));
                            var color = "#48CA3B";
                            switch (val.attributes.Class) {
                                case "Grain Crops":
                                    color = "#8eeaff";
                                    break;
                                case "Almonds":
                                    color = "#84784f";
                                    break;
                                case "Corn":
                                    color = "#f9f900";
                                    break;
                                case "Cotton":
                                    color = "#dbdbdb";
                                    break;
                                case "Fruit Trees":
                                    color = "#f97020";
                                    break;
                                case "Grapes":
                                    color = "#7f00ff";
                                    break;
                                case "Rice":
                                    color = "#0083ff";
                                    break;
                                case "Tomatoes":
                                    color = "#ff0000";
                                    break;
                                case "Vegs & Fruits":
                                    color = "#016d06";
                                    break;
                                case "Walnuts":
                                    color = "#f59bff";
                                    break;
                                case "Winter Wheat":
                                    color = "#05006d";
                                    break;
                                case "Fallow":
                                    color = "#562c0a";
                                    break;
                                case "Deciduous Forest":
                                    color = "#199301";
                                    break;
                                case "Evergreen Forest":
                                    color = "#0e5100";
                                    break;
                                case "Grassland":
                                    color = "#94a843";
                                    break;
                                case "High Intensity Developed":
                                    color = "#700101";
                                    break;
                                case "Low Intensity Developed":
                                    color = "#fc8f8f";
                                    break;
                                case "Mixed Forest":
                                    color = "#287a30";
                                    break;
                                case "Shrubland":
                                    color = "#686b3e";
                                    break;
                                case "Water":
                                    color = "#0a00ce";
                                    break;
                                case "Wetlands":
                                    color = "#3b3872";
                                    break;
                                case "Alfalfa & Hay":
                                    color = "#DEBB27";
                                    break;
                                case "Barren":
                                    color = "#474747";
                                    break;
                            }
                            val.attributes.color = color;

                            color1.push(val.attributes.color);
                            data1.push([val.attributes.label, val.attributes.data]);
                            tableData.push(val.attributes);
                        });

                        Highcharts.chart('LandClass-Bar-Chart2016', {
                            chart: {
                                type: 'bar'
                            },
                            title: {
                                text: null
                            },
                            xAxis: {
                                type: 'category',
                                labels: {
                                    rotation: 0,
                                    style: {
                                        fontSize: '10px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: null
                                },
                                labels: {
                                    format: '{value}%'
                                }
                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: '<b>{point.y:.1f}%</b>'
                            },
                            series: [{
                                data: data1
                            }],
                            plotOptions:{
                                bar: {
                                    colorByPoint: true,
                                    colors: color1,
                                    events: {
                                        click: function(e) {
                                            var href = e.point.name;

                                            switch (href) {
                                                case "Evergreen Forest":
                                                    layer.set("renderingRule", colorEvergreen);
                                                    break;
                                                case "Shrubland":
                                                    layer.set("renderingRule", colorShrubland);
                                                    break;
                                                case "Grassland":
                                                    layer.set("renderingRule", colorGrassland);
                                                    break;
                                                case "Corn":
                                                    layer.set("renderingRule", colorCorn);
                                                    break;
                                                case "Cotton":
                                                    layer.set("renderingRule", colorCotton);
                                                    break;
                                                case "Rice":
                                                    layer.set("renderingRule", colorRice);
                                                    break;
                                                case "Grain Crops":
                                                    layer.set("renderingRule", colorGrain);
                                                    break;
                                                case "Vegs & Fruits":
                                                    layer.set("renderingRule", colorVeg);
                                                    break;
                                                case "Winter Wheat":
                                                    layer.set("renderingRule", colorWheat);
                                                    break;
                                                case "Alfalfa & Hay":
                                                    layer.set("renderingRule", colorAlfalfa);
                                                    break;
                                                case "Tomatoes":
                                                    layer.set("renderingRule", colorTomato);
                                                    break;
                                                case "Fallow":
                                                    layer.set("renderingRule", colorFallow);
                                                    break;
                                                case "Fruit Trees":
                                                    layer.set("renderingRule", colorFruit);
                                                    break;
                                                case "Grapes":
                                                    layer.set("renderingRule", colorGrape);
                                                    break;
                                                case "Other Tree Crops":
                                                    layer.set("renderingRule", colorOther);
                                                    break;
                                                case "Almonds":
                                                    layer.set("renderingRule", colorAlmond);
                                                    break;
                                                case "Walnuts":
                                                    layer.set("renderingRule", colorWalnut);
                                                    break;
                                                case "Water":
                                                    layer.set("renderingRule", colorWater);
                                                    break;
                                                case "Perennial Ice/Snow":
                                                    layer.set("renderingRule", colorIce);
                                                    break;
                                                case "Low Intensity Developed":
                                                    layer.set("renderingRule", colorLowDev);
                                                    break;
                                                case "Barren":
                                                    layer.set("renderingRule", colorBarren);
                                                    break;
                                                case "Deciduous Forest":
                                                    layer.set("renderingRule", colorDeciduous);
                                                    break;
                                                case "Mixed Forest":
                                                    layer.set("renderingRule", colorMixed);
                                                    break;
                                                case "Wetlands":
                                                    layer.set("renderingRule", colorWetland);
                                                    break;
                                                case "High Intensity Developed":
                                                    layer.set("renderingRule", colorHighDev);
                                                    break;
                                                default:
                                                    layer.set("renderingRule", colorAll);
                                                    break;
                                            }
                                            //layer.set("renderingRule", colorRF);
                                            layer.set("mosaicRule", mosaicRule);
                                            setTimeout(formatLegend, 500);
                                        }
                                    }
                                }
                            },
                            credits: {
                                enabled: false
                            },

                            exporting: {
                                filename: countyName + 'CropPct'
                            }
                        });
                    });

                };

                function gapLandClass(objectID) {

                    var data1 = [];

                    var ticks = [];

                    var color1 = [];

                    tableDataGap = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=5&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        var trHTML = '';

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(i, val) {

                            trHTML += '<tr><td>' + val.attributes.Class + '</td><td>' + f(val.attributes.Sum_) + '</td><td>' + p(val.attributes.PercentCounty) + '</td><td>' + val.attributes.Count_ + '</td><td>' + f(val.attributes.Mean) + '</td><td>' + f(val.attributes.Gini) + '</td></tr>';
                        });

                        $('#dataTableGap2 tbody tr').remove();
                        $('#dataTableGap2 tbody').append(trHTML);
                        $.bootstrapSortable(true, undefined, 'default');

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            val.attributes.label = val.attributes.Class;
                            val.attributes.data = parseFloat(f(val.attributes.PercentCounty * 100));
                            var color = "#9e8c4f";
                            switch (val.attributes.Class) {
                                case "Barren":
                                    color = "#606060";
                                    break;
                                case "Cool Semi-Desert Scrub & Grassland":
                                    color = "#d6c482";
                                    break;
                                case "Developed & Urban":
                                    color = "#9b3434";
                                    break;
                                case "Introduced & Semi Natural Vegetation":
                                    color = "#ff0000";
                                    break;
                                case "Mediterranean Scrub & Grassland":
                                    color = "#849148";
                                    break;
                                case "Mediterranean, Temperate & Boreal Nonvascular & Sparse Vegetation":
                                    color = "#efcf77";
                                    break;
                                case "Open Water":
                                    color = "#0000ff";
                                    break;
                                case "Polar & High Montane Nonvascular & Sparse Vegetation":
                                    color = "#ffffff";
                                    break;
                                case "Saltwater Aquatic Vegetation":
                                    color = "#344870";
                                    break;
                                case "Semi-Desert Nonvascular & Sparse Vascular Vegetation":
                                    color = "#ddb8d0";
                                    break;
                                case "Temperate & Boreal Alpine Vegetation":
                                    color = "#c9e2a3";
                                    break;
                                case "Temperate & Boreal Shrubland & Grassland":
                                    color = "#559148";
                                    break;
                                case "Temperate Forest":
                                    color = "#019b04";
                                    break;
                                case "Current and Historic Mining Activity":
                                    color = "#ff7b00";
                                    break;
                                case "Herbaceous Agricultural Vegetation":
                                    color = "#f7f6d2";
                                    break;
                                case "Recently Disturbed or Modified":
                                    color = "#b7b7b7";
                                    break;
                            }
                            val.attributes.color = color;

                            function formatLabel(str, maxwidth){
                                var sections = [];
                                var words = str.split(" ");
                                var temp = "";

                                words.forEach(function(item, index){
                                    if(temp.length > 0)
                                    {
                                        var concat = temp + ' ' + item;

                                        if(concat.length > maxwidth){
                                            sections.push(temp);
                                            temp = "";
                                        }
                                        else{
                                            if(index == (words.length-1))
                                            {
                                                sections.push(concat);
                                                return;
                                            }
                                            else{
                                                temp = concat;
                                                return;
                                            }
                                        }
                                    }

                                    if(index == (words.length-1))
                                    {
                                        sections.push(item);
                                        return;
                                    }

                                    if(item.length < maxwidth) {
                                        temp = item;
                                    }
                                    else {
                                        sections.push(item);
                                    }

                                });

                                return sections;
                            }

                            color1.push(val.attributes.color);
                            data1.push([val.attributes.label, val.attributes.data]);
                            tableDataGap.push(val.attributes);
                        });



                        Highcharts.chart('LandClass-Bar-Chart-Gap', {
                            chart: {
                                type: 'bar'
                            },
                            title: {
                                text: null
                            },
                            xAxis: {
                                type: 'category',
                                labels: {
                                    rotation: 0,
                                    style: {
                                        fontSize: '10px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: null
                                },
                                labels: {
                                    format: '{value}%'
                                }
                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: '<b>{point.y:.1f}%</b>'
                            },
                            series: [{
                                data: data1
                            }],
                            plotOptions:{
                                bar: {
                                    colorByPoint: true,
                                    colors: color1,
                                    events: {
                                        click: function(e) {
                                            var href = e.point.name;

                                            switch (href) {
                                                case "Barren":
                                                    layerGap.set("renderingRule", colorBare);
                                                    break;
                                                case "Cool Semi-Desert Scrub & Grassland":
                                                    layerGap.set("renderingRule", colorCSD);
                                                    break;
                                                case "Developed & Urban":
                                                    layerGap.set("renderingRule", colorUrban);
                                                    break;
                                                case "Introduced & Semi Natural Vegetation":
                                                    layerGap.set("renderingRule", colorIntro);
                                                    break;
                                                case "Mediterranean Scrub & Grassland":
                                                    layerGap.set("renderingRule", colorMedScrub);
                                                    break;
                                                case "Mediterranean, Temperate & Boreal Nonvascular & Sparse Vegetation":
                                                    layerGap.set("renderingRule", colorMedTemp);
                                                    break;
                                                case "Open Water":
                                                    layerGap.set("renderingRule", colorWaterGap);
                                                    break;
                                                case "Polar & High Montane Nonvascular & Sparse Vegetation":
                                                    layerGap.set("renderingRule", colorPolar);
                                                    break;
                                                case "Saltwater Aquatic Vegetation":
                                                    layerGap.set("renderingRule", colorSaltVeg);
                                                    break;
                                                case "Semi-Desert Nonvascular & Sparse Vascular Vegetation":
                                                    layerGap.set("renderingRule", colorSemiDes);
                                                    break;
                                                case "Temperate & Boreal Alpine Vegetation":
                                                    layerGap.set("renderingRule", colorTempAlp);
                                                    break;
                                                case "Temperate & Boreal Shrubland & Grassland":
                                                    layerGap.set("renderingRule", colorTempShrub);
                                                    break;
                                                case "Temperate Forest":
                                                    layerGap.set("renderingRule", colorTempForest);
                                                    break;
                                                case "Warm Semi-Desert Scrub & Grassland":
                                                    layerGap.set("renderingRule", colorWSD);
                                                    break;
                                            }
                                            //layer.set("renderingRule", colorRF);
                                            layerGap.set("mosaicRule", mosaicRule);
                                            setTimeout(formatLegend, 500);
                                        }
                                    }
                                }
                            },
                            credits: {
                                enabled: false
                            },

                            exporting: {
                                filename: countyName + 'FRPct'
                            }
                        });
                    });

                };

                function cdlOwnerClass(objectID) {

                    var arrC1 = [];
                    var arrC2 = [];

                    var ticks = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=3&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            arrC1.push(parseFloat(tp(Math.round(val.attributes.PerAcres * 100))));
                        });

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val2) {
                            arrC2.push(parseFloat(tp(Math.round(val2.attributes.PerOwners * 100))));
                        });

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val3) {
                            ticks.push(val3.attributes.Category);
                        });


                        Highcharts.chart('Bar-Chart', {
                            chart: {
                                type: 'bar'
                            },
                            title: {
                                text: null
                            },
                            xAxis: {
                                categories: ticks,
                                title: {
                                    text: 'Size Class (acres)'
                                }
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: null
                                },
                                labels: {
                                    format: '{value}%'
                                }
                            },
                            tooltip: {
                                valueSuffix: '%'
                            },
                            plotOptions: {
                                bar: {
                                    dataLabels: {
                                        enabled: false
                                    }
                                }
                            },
                            legend: {
                                layout: 'horizontal',
                                align: 'center',
                                verticalAlign: 'top'
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: 'Acreage',
                                data: arrC1,
                                color: "green"
                            }, {
                                name: 'Owners',
                                data: arrC2,
                                color: "blue"
                            }],
                            exporting: {
                                filename: countyName + 'CropOwners'
                            }
                        });
                    });

                };

                function cdlOwnerClass2016(objectID) {

                    var arrC1 = [];
                    var arrC2 = [];

                    var ticks = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=4&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            arrC1.push(parseFloat(tp(Math.round(val.attributes.PerAcres * 100))));
                        });

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val2) {
                            arrC2.push(parseFloat(tp(Math.round(val2.attributes.PerOwners * 100))));
                        });

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val3) {
                            ticks.push(val3.attributes.Category);
                        });


                        Highcharts.chart('Bar-Chart2016', {
                            chart: {
                                type: 'bar'
                            },
                            title: {
                                text: null
                            },
                            xAxis: {
                                categories: ticks,
                                title: {
                                    text: 'Size Class (acres)'
                                }
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: null
                                },
                                labels: {
                                    format: '{value}%'
                                }
                            },
                            tooltip: {
                                valueSuffix: '%'
                            },
                            plotOptions: {
                                bar: {
                                    dataLabels: {
                                        enabled: false
                                    }
                                }
                            },
                            legend: {
                                layout: 'horizontal',
                                align: 'center',
                                verticalAlign: 'top'
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: 'Acreage',
                                data: arrC1,
                                color: "green"
                            }, {
                                name: 'Owners',
                                data: arrC2,
                                color: "blue"
                            }],
                            exporting: {
                                filename: countyName + 'CropOwners'
                            }
                        });
                    });

                };

                function gapOwnerClass(objectID) {

                    var arrC1 = [];
                    var arrC2 = [];

                    var ticks = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=7&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            arrC1.push(parseFloat(tp(Math.round(val.attributes.PerAcres * 100))));
                        });

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val2) {
                            arrC2.push(parseFloat(tp(Math.round(val2.attributes.PerOwners * 100))));
                        });

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val3) {
                            ticks.push(val3.attributes.Category);
                        });


                        Highcharts.chart('Bar-Chart-Gap', {
                            chart: {
                                type: 'bar'
                            },
                            title: {
                                text: null
                            },
                            xAxis: {
                                categories: ticks,
                                title: {
                                    text: 'Size Class (acres)'
                                }
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: null
                                },
                                labels: {
                                    format: '{value}%'
                                }
                            },
                            tooltip: {
                                valueSuffix: '%'
                            },
                            plotOptions: {
                                bar: {
                                    dataLabels: {
                                        enabled: false
                                    }
                                }
                            },
                            legend: {
                                layout: 'horizontal',
                                align: 'center',
                                verticalAlign: 'top'
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: 'Acreage',
                                data: arrC1,
                                color: "green"
                            }, {
                                name: 'Owners',
                                data: arrC2,
                                color: "blue"
                            }],
                            exporting: {
                                filename: countyName + 'FROwners'
                            }
                        });
                    });

                };

                function cdlPieOwnerChart(objectID) {

                    var data1 = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=0&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(data) {

                        $.each(data.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            data1.push([val.attributes.LandType, (val.attributes.LandTypePercent * 100)]);
                        });

                        Highcharts.chart('Pie-Chart', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie'
                            },
                            title: {
                                text: null
                            },
                            tooltip: {
                                pointFormat: '<b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: true,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        }
                                    }
                                }
                            },
                            series: [{
                                data: data1
                            }],
                            credits: {
                                enabled: false
                            },
                            exporting: {
                                filename: countyName + 'PubPriv'
                            }
                        });

                    });

                };

                function cdlPieOwnerChart2016(objectID) {

                    var data1 = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=0&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(data) {

                        $.each(data.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            data1.push([val.attributes.LandType, (val.attributes.LandTypePercent * 100)]);
                        });

                        Highcharts.chart('Pie-Chart2016', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie'
                            },
                            title: {
                                text: null
                            },
                            tooltip: {
                                pointFormat: '<b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: true,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        }
                                    }
                                }
                            },
                            series: [{
                                data: data1
                            }],
                            credits: {
                                enabled: false
                            },
                            exporting: {
                                filename: countyName + 'PubPriv'
                            }
                        });

                    });

                };

                function gapPieOwnerChart(objectID) {

                    var data1 = [];

                    var ticks = [];

                    var color1 = [];

                    $.getJSON("http://services.arcgis.com/0xnwbwUttaTjns4i/ArcGIS/rest/services/CalTrendsFinal/FeatureServer/0/queryRelatedRecords?objectIds=" + objectID + "&relationshipId=0&outFields=*&definitionExpression=&orderByFields=&returnCountOnly=false&returnGeometry=false&maxAllowableOffset=&geometryPrecision=&outSR=&resultOffset=&resultRecordCount=&f=pjson&token=", function(datajson) {

                        $.each(datajson.relatedRecordGroups[0].relatedRecords, function(key, val) {
                            data1.push([val.attributes.LandType, (val.attributes.LandTypePercent * 100)]);
                        });

                        var gapData = {
                            labels: ticks,
                            datasets: [{
                                data: data1,
                                backgroundColor: color1
                            }]
                        };

                        Highcharts.chart('Pie-Chart-Gap', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie'
                            },
                            title: {
                                text: null
                            },
                            tooltip: {
                                pointFormat: '<b>{point.percentage:.1f}%</b>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {
                                        enabled: true,
                                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                        style: {
                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                        }
                                    }
                                }
                            },
                            series: [{
                                data: data1
                            }],
                            credits: {
                                enabled: false
                            },
                            exporting: {
                                filename: countyName + 'PubPriv'
                            }
                        });


                    });

                };

                function clicked(d) {

                    layer.set("renderingRule", colorAll);
                    layerGap.set("renderingRule", colorAllGap);

                    setTimeout(formatLegend, 1000);

                    $('#cdlGraphs').show();
                    $('#cdlGraphs2016').show();
                    $('#gapGraphs').show();
                    $('#cdlSummary').show();
                    $('#cdlLandClass').show();
                    $('#cdlPieChart').show();
                    $('#cdlBarChart').show();
                    $('#cdlCumAcres').show();
                    $('#cdlDataTable').show();
                    $('#cdlSummary2016').show();
                    $('#cdlLandClass2016').show();
                    $('#cdlPieChart2016').show();
                    $('#cdlBarChart2016').show();
                    $('#cdlCumAcres2016').show();
                    $('#cdlDataTable2016').show();
                    $('#gapSummary').show();
                    $('#gapLandClass').show();
                    $('#gapPieChart').show();
                    $('#gapBarChart').show();
                    $('#gapCumAcres').show();
                    $('#gapDataTable').show();

                    countyID = d.attributes.OBJECTID;

                    countyName = d.attributes.County;

                    querySelectedAdmin(d.attributes.County);

                    var trHTML = '<tr><td>Total Acres of Cropland</td><td>' + ft(d.attributes.CDL2013Acres) + '</td></tr><tr><td>Number of Cropland Owners</td><td>' + t(d.attributes.CDL2013Owners) + '</td></tr><tr><td>Percent of County in Cropland</td><td>' + p(d.attributes.CDL2013PctCrop) + '</td></tr><tr><td>Acres (25th Percentile)</td><td>' + ft(d.attributes.CDL201325th) + '</td></tr><tr><td>Acres (Median)</td><td>' + f(d.attributes.CDL2013Median) + '</td></tr><tr><td>Acres (75th Percentile)</td><td>' + ft(d.attributes.CDL201375th) + '</td></tr>';

                    $('#dataTable2 tbody tr').remove();
                    $('#dataTable2 tbody').append(trHTML);

                    var trHTML = '<tr><td>Total Acres of Cropland</td><td>' + ft(d.attributes.CDL2016Acres) + '</td></tr><tr><td>Number of Cropland Owners</td><td>' + t(d.attributes.CDL2016Owners) + '</td></tr><tr><td>Percent of County in Cropland</td><td>' + p(d.attributes.CDL2016PctCrop) + '</td></tr><tr><td>Acres (25th Percentile)</td><td>' + ft(d.attributes.CDL201625th) + '</td></tr><tr><td>Acres (Median)</td><td>' + f(d.attributes.CDL2016Median) + '</td></tr><tr><td>Acres (75th Percentile)</td><td>' + ft(d.attributes.CDL201675th) + '</td></tr>';

                    $('#dataTable22016 tbody tr').remove();
                    $('#dataTable22016 tbody').append(trHTML);

                    var trHTMLGap = '<tr><td>Total Acres of Forest and Rangeland</td><td>' + ft(d.attributes.GAPAcres) + '</td></tr><tr><td>Number of Forest and Rangeland Owners/td><td>' + t(d.attributes.GAPOwners) + '</td></tr><tr><td>Percent of County in Forest and Rangeland</td><td>' + p(d.attributes.GAPPctCrop) + '</td></tr><tr><td>Acres (25th Percentile)</td><td>' + ft(d.attributes.GAP25th) + '</td></tr><tr><td>Acres (Median)</td><td>' + f(d.attributes.GAPMedian) + '</td></tr><tr><td>Acres (75th Percentile)</td><td>' + ft(d.attributes.GAP75th) + '</td></tr>';

                    $('#dataTableGap tbody tr').remove();
                    $('#dataTableGap tbody').append(trHTMLGap);



                    d3.select("#CountyName").select("text").remove();
                    d3.select("#CountyName").append("text")
                        .attr("class", "countyLabel")
                        .text(d.attributes.County + " County Statistics");
                    d3.select("#CountyName2016").select("text").remove();
                    d3.select("#CountyName2016").append("text")
                        .attr("class", "countyLabel")
                        .text(d.attributes.County + " County Statistics");
                    d3.select("#CountyNameGap").select("text").remove();
                    d3.select("#CountyNameGap").append("text")
                        .attr("class", "countyLabel")
                        .text(d.attributes.County + " County Private Land Statistics");


                    cdlLandClass(d.attributes.OBJECTID);
                    cdlOwnerClass(d.attributes.OBJECTID);
                    cdlPieOwnerChart(d.attributes.OBJECTID);
                    cdlCumAcres(d.attributes.OBJECTID);
                    cdlLandClass2016(d.attributes.OBJECTID);
                    cdlOwnerClass2016(d.attributes.OBJECTID);
                    cdlPieOwnerChart2016(d.attributes.OBJECTID);
                    cdlCumAcres2016(d.attributes.OBJECTID);
                    gapLandClass(d.attributes.OBJECTID);
                    gapOwnerClass(d.attributes.OBJECTID);
                    gapPieOwnerChart(d.attributes.OBJECTID);
                    gapCumAcres(d.attributes.OBJECTID);



                };

                function clicked2(d) {

                    layer.set("renderingRule", colorAll);
                    layerGap.set("renderingRule", colorAllGap);

                    setTimeout(formatLegend, 1000);

                    $('#cdlGraphs').show();
                    $('#cdlGraphs2016').show();
                    $('#gapGraphs').show();
                    $('#cdlSummary').show();
                    $('#cdlLandClass').show();
                    $('#cdlPieChart').show();
                    $('#cdlBarChart').show();
                    $('#cdlCumAcres').show();
                    $('#cdlDataTable').show();
                    $('#cdlSummary2016').show();
                    $('#cdlLandClass2016').show();
                    $('#cdlPieChart2016').show();
                    $('#cdlBarChart2016').show();
                    $('#cdlCumAcres2016').show();
                    $('#cdlDataTable2016').show();
                    $('#gapSummary').show();
                    $('#gapLandClass').show();
                    $('#gapPieChart').show();
                    $('#gapBarChart').show();
                    $('#gapCumAcres').show();
                    $('#gapDataTable').show();

                    countyID = d.attributes.OBJECTID;

                    countyName = d.attributes.County;

                    //querySelectedAdmin(d.attributes.County);

                    var trHTML = '<tr><td>Total Acres of Cropland</td><td>' + ft(d.attributes.CDL2013Acres) + '</td></tr><tr><td>Number of Cropland Owners</td><td>' + t(d.attributes.CDL2013Owners) + '</td></tr><tr><td>Percent of County in Cropland</td><td>' + p(d.attributes.CDL2013PctCrop) + '</td></tr><tr><td>Acres (25th Percentile)</td><td>' + ft(d.attributes.CDL201325th) + '</td></tr><tr><td>Acres (Median)</td><td>' + f(d.attributes.CDL2013Median) + '</td></tr><tr><td>Acres (75th Percentile)</td><td>' + ft(d.attributes.CDL201375th) + '</td></tr>';

                    $('#dataTable2 tbody tr').remove();
                    $('#dataTable2 tbody').append(trHTML);

                    var trHTML = '<tr><td>Total Acres of Cropland</td><td>' + ft(d.attributes.CDL2016Acres) + '</td></tr><tr><td>Number of Cropland Owners</td><td>' + t(d.attributes.CDL2016Owners) + '</td></tr><tr><td>Percent of County in Cropland</td><td>' + p(d.attributes.CDL2016PctCrop) + '</td></tr><tr><td>Acres (25th Percentile)</td><td>' + ft(d.attributes.CDL201625th) + '</td></tr><tr><td>Acres (Median)</td><td>' + f(d.attributes.CDL2016Median) + '</td></tr><tr><td>Acres (75th Percentile)</td><td>' + ft(d.attributes.CDL201675th) + '</td></tr>';

                    $('#dataTable22016 tbody tr').remove();
                    $('#dataTable22016 tbody').append(trHTML);

                    var trHTMLGap = '<tr><td>Total Acres of Forest and Rangeland</td><td>' + ft(d.attributes.GAPAcres) + '</td></tr><tr><td>Number of Forest and Rangeland Owners/td><td>' + t(d.attributes.GAPOwners) + '</td></tr><tr><td>Percent of County in Forest and Rangeland</td><td>' + p(d.attributes.GAPPctCrop) + '</td></tr><tr><td>Acres (25th Percentile)</td><td>' + ft(d.attributes.GAP25th) + '</td></tr><tr><td>Acres (Median)</td><td>' + f(d.attributes.GAPMedian) + '</td></tr><tr><td>Acres (75th Percentile)</td><td>' + ft(d.attributes.GAP75th) + '</td></tr>';

                    $('#dataTableGap tbody tr').remove();
                    $('#dataTableGap tbody').append(trHTMLGap);



                    d3.select("#CountyName").select("text").remove();
                    d3.select("#CountyName").append("text")
                        .attr("class", "countyLabel")
                        .text(d.attributes.County + " County Statistics");
                    d3.select("#CountyName2016").select("text").remove();
                    d3.select("#CountyName2016").append("text")
                        .attr("class", "countyLabel")
                        .text(d.attributes.County + " County Statistics");
                    d3.select("#CountyNameGap").select("text").remove();
                    d3.select("#CountyNameGap").append("text")
                        .attr("class", "countyLabel")
                        .text(d.attributes.County + " County Private Land Statistics");


                    cdlLandClass(d.attributes.OBJECTID);
                    cdlOwnerClass(d.attributes.OBJECTID);
                    cdlPieOwnerChart(d.attributes.OBJECTID);
                    cdlCumAcres(d.attributes.OBJECTID);
                    cdlLandClass2016(d.attributes.OBJECTID);
                    cdlOwnerClass2016(d.attributes.OBJECTID);
                    cdlPieOwnerChart2016(d.attributes.OBJECTID);
                    cdlCumAcres2016(d.attributes.OBJECTID);
                    gapLandClass(d.attributes.OBJECTID);
                    gapOwnerClass(d.attributes.OBJECTID);
                    gapPieOwnerChart(d.attributes.OBJECTID);
                    gapCumAcres(d.attributes.OBJECTID);



                };

                function divHeight() {
                    $("#content").height($(window).outerHeight() - $("#mainHeader").outerHeight() - $("#contacts1-5").outerHeight() - $("#graphToggle").outerHeight());
                    $("#sidebar").height($(window).outerHeight() - $("#mainHeader").outerHeight() - $("#contacts1-5").outerHeight() - $("#graphToggle").outerHeight());
                    $("#sidebar2016").height($(window).outerHeight() - $("#mainHeader").outerHeight() - $("#contacts1-5").outerHeight() - $("#graphToggle").outerHeight());
                    $("#sidebarGap").height($(window).outerHeight() - $("#mainHeader").outerHeight() - $("#contacts1-5").outerHeight() - $("#graphToggle").outerHeight());
                };

                function divHeight2() {
                    $("#viewDiv").height(($(window).height() - $("#ext_menu-0").height() - $("#contacts1-5").height() - $("#mapHeader").height() - $("#mapFooter").height())/2);
                };

                function tableExport() {

                    var csv = JSON2CSV(JSON.stringify(tableData));
                    var dateObj = new Date();
                    var month = dateObj.getUTCMonth() + 1; //months from 1-12
                    var day = dateObj.getUTCDate();
                    var year = dateObj.getUTCFullYear();

                    newdate = year + "/" + month + "/" + day;

                    var downloadLink = document.createElement("a");
                    var blob = new Blob(["\ufeff", csv]);

                    if (navigator.msSaveBlob) { // IE 10+
                        navigator.msSaveBlob(blob, dataType + "_" + newdate + ".csv")
                    } else {
                        var url = URL.createObjectURL(blob);
                        downloadLink.href = url;
                        downloadLink.download = dataType + "_" + newdate + ".csv";

                        document.body.appendChild(downloadLink);
                        downloadLink.click();
                        document.body.removeChild(downloadLink);
                    }

                };

                function tableExport2() {

                    var csv = JSON2CSV(JSON.stringify(tableDataGap));
                    var dateObj = new Date();
                    var month = dateObj.getUTCMonth() + 1; //months from 1-12
                    var day = dateObj.getUTCDate();
                    var year = dateObj.getUTCFullYear();

                    newdate = year + "/" + month + "/" + day;

                    var downloadLink = document.createElement("a");
                    var blob = new Blob(["\ufeff", csv]);

                    if (navigator.msSaveBlob) { // IE 10+
                        navigator.msSaveBlob(blob, dataType + "_" + newdate + ".csv")
                    } else {
                        var url = URL.createObjectURL(blob);
                        downloadLink.href = url;
                        downloadLink.download = dataType + "_" + newdate + ".csv";

                        document.body.appendChild(downloadLink);
                        downloadLink.click();
                        document.body.removeChild(downloadLink);
                    }

                };

                function JSON2CSV(objArray) {
                    var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

                    var str = '';
                    var line = '';

                    var head = array[0];
                    for (var index in array[0]) {
                        var value = index + "";
                        line += '"' + value.replace(/"/g, '""') + '",';
                    }

                    line = line.slice(0, -1);
                    str += line + '\r\n';

                    for (var i = 0; i < array.length; i++) {
                        var line = '';

                        //if ($("#quote").is(':checked')) {
                        for (var index in array[i]) {
                            var value = array[i][index] + "";
                            line += '"' + value.replace(/"/g, '""') + '",';
                        }
                        /*} else {
                        for (var index in array[i]) {
                            line += array[i][index] + ',';
                        }
                    }*/

                        line = line.slice(0, -1);
                        str += line + '\r\n';
                    }
                    return str;


                };

                function zoomCounty() {
                    view.goTo({
                        target: countyLayer.graphics
                    });
                };

                function formatLegend() {
                    $(".esri-legend__service-label").closest("div").each( function(index){
                        $( this ).find('.esri-legend__layer-cell.esri-legend__layer-cell--info').each( function(index1){
                            var testIndex = $(".esri-legend__service-label")[index].innerHTML;
                            if (testIndex=="Forest and Rangeland"){
                                switch($( this ).text()){
                                    case "2":
                                        $( this ).text("Temperate Forest")
                                        break;

                                    case "3":
                                        $( this ).text("Mediterranean Scrub & Grassland")
                                        break;

                                    case "4":
                                        $( this ).text("Temperate & Boreal Shrubland & Grassland")
                                        break;

                                    case "5":
                                        $( this ).text("Warm Semi-Desert Scrub & Grassland")
                                        break;

                                    case "6":
                                        $( this ).text("Cool Semi-Desert Scrub & Grassland")
                                        break;

                                    case "7":
                                        $( this ).text("Temperate & Boreal Alpine Vegetation")
                                        break;

                                    case "8":
                                        $( this ).text("Saltwater Aquatic Vegetation")
                                        break;

                                    case "9":
                                        $( this ).text("Mediterranean, Temperate & Boreal Nonvascular & Sparse Vegetation")
                                        break;

                                    case "10":
                                        $( this ).text("Semi-Desert Nonvascular & Sparse Vegetation")
                                        break;

                                    case "11":
                                        $( this ).text("Polar & High Montane Nonvascular & Sparse Vegetation")
                                        break;

                                    case "12":
                                        $( this ).text("Barren")
                                        break;

                                    case "13":
                                        $( this ).text("Herbaceous Agricultural Vegetation")
                                        break;

                                    case "14":
                                        $( this ).text("Introduced & Semi Natural Vegetation")
                                        break;

                                    case "15":
                                        $( this ).text("Recently Disturbed or Modified")
                                        break;

                                    case "16":
                                        $( this ).text("Open Water")
                                        break;

                                    case "17":
                                        $( this ).text("Current and Historic Mining Activity")
                                        break;

                                    case "18":
                                        $( this ).text("Developed & Urban")
                                        break;

                                }
                            }
                            else if (testIndex=="Cropland")
                            {
                                switch($( this ).text()){
                                    case "2":
                                        $( this ).text("Corn")
                                        break;

                                    case "3":
                                        $( this ).text("Cotton")
                                        break;

                                    case "4":
                                        $( this ).text("Rice")
                                        break;

                                    case "5":
                                        $( this ).text("Grain Crops")
                                        break;

                                    case "6":
                                        $( this ).text("Vegs & Fruits")
                                        break;

                                    case "7":
                                        $( this ).text("Winter Wheat")
                                        break;

                                    case "8":
                                        $( this ).text("Alfalfa & Hay")
                                        break;

                                    case "9":
                                        $( this ).text("Tomatoes")
                                        break;

                                    case "10":
                                        $( this ).text("Grassland")
                                        break;

                                    case "11":
                                        $( this ).text("Fallow")
                                        break;

                                    case "12":
                                        $( this ).text("Fruit Trees")
                                        break;

                                    case "13":
                                        $( this ).text("Grapes")
                                        break;

                                    case "14":
                                        $( this ).text("Other Tree Crops")
                                        break;

                                    case "15":
                                        $( this ).text("Almonds")
                                        break;

                                    case "16":
                                        $( this ).text("Walnuts")
                                        break;

                                    case "17":
                                        $( this ).text("Water")
                                        break;

                                    case "18":
                                        $( this ).text("Perennial Ice/Snow")
                                        break;

                                    case "19":
                                        $( this ).text("Low Intensity Developed")
                                        break;

                                    case "20":
                                        $( this ).text("Barren")
                                        break;

                                    case "21":
                                        $( this ).text("Deciduous Forest")
                                        break;

                                    case "22":
                                        $( this ).text("Evergreen Forest")
                                        break;

                                    case "23":
                                        $( this ).text("Mixed Forest")
                                        break;

                                    case "24":
                                        $( this ).text("Shrubland")
                                        break;

                                    case "25":
                                        $( this ).text("Wetlands")
                                        break;

                                    case "26":
                                        $( this ).text("High Intensity Developed")
                                        break;
                                }
                            }
                        })
                    });

                    $(".esri-legend__service-label").each( function(index){
                        var content = $(this)[0].innerHTML;
                        if (content == "Gaplndcov CA"){
                            $( this ).text("Forest and Rangeland")
                        }
                        else if (content == "CDL2013") {
                            $( this ).text("Cropland")
                        }
                    });

                    $(".esri-legend__service-label").closest("div").each( function(index){
                        $( this ).find('.esri-legend__layer-caption').each( function(index1){
                            var content = $(this)[0].innerHTML;
                            if (content=="CalLandTrends/gaplndcov_CA"){
                                $( this ).text("Landcover Type")
                            }
                            else if (content=="CalLandTrends/CDL2013"){
                                $( this ).text("Crop Type")
                            }
                        })
                    });

                };

                $(window).resize(divHeight);

                // handle on click event to switch between maps
                d3.selectAll(".m")
                    .on("click", function() {
                    var choro = this.getAttribute("value");
                    updateChoro(choro);
                });

                // handle on click event to switch between maps
                d3.selectAll(".n")
                    .on("click", function() {
                    var choroGap = this.getAttribute("value");
                    updateChoroGap(choroGap);
                });

                $(".fa.fa-chevron-down").click(function(){
                    setTimeout(function(){Highcharts.charts.forEach(function(chart) {
                        chart.reflow();
                    })}, 300);
                });

                $(".tutorial").click(function(){
                    introJs().setOption('showProgress', true).start()
                });

                $(".cdlData2016").click(function() {
                    if (dataButton == 2 & viewButton == 1 & sidebarButton == 1) {
                        $('#sidebar2016').show();
                        $('#sidebarGap').hide();
                        $('#cdlToggle2016').show();
                        $('#gapToggle').hide();
                        dataButton = 3;
                    } else if (dataButton == 1 & viewButton == 1 & sidebarButton == 1) {
                        $('#sidebar2016').show();
                        $('#sidebar').hide();
                        $('#cdlToggle2016').show();
                        $('#cdlToggle').hide();
                        dataButton = 3;
                    } else if (dataButton == 2 & viewButton == 2) {
                        $('#gapMapToggle').hide();
                        $('#cdlMapToggle2016').show();
                        $('#collapseEight').addClass('collapse');
                        $('#collapseNine').addClass('collapse');
                        $('#collapseTen').addClass('collapse');
                        $('#collapseEleven').addClass('collapse');
                        $('#collapseTwelve').addClass('collapse');
                        $('#gapSummary').toggleClass('col-md-4 col-md-12');
                        $('#gapLandClass').toggleClass('col-md-4 col-md-12');
                        $('#gapPieChart').toggleClass('col-md-4 col-md-12');
                        $('#gapBarChart').toggleClass('col-md-4 col-md-12');
                        $('#gapCumAcres').toggleClass('col-md-4 col-md-12');
                        $('#gapSummary').appendTo('#sidebarGap');
                        $('#gapLandClass').insertAfter('#gapSummary');
                        $('#gapCumAcres').insertAfter('#gapLandClass');
                        $('#gapPieChart').insertAfter('#gapCumAcres');
                        $('#gapBarChart').insertAfter('#gapPieChart');
                        $('#gapDataTable').insertAfter('#gapBarChart');
                        $('#collapseFourteen').removeClass('collapse');
                        $('#collapseSixteen').removeClass('collapse');
                        $('#collapseSeventeen').removeClass('collapse');
                        $('#collapseEighteen').removeClass('collapse');
                        $('#collapseSeventeen').removeClass('collapse');
                        $('#cdlSummary2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlLandClass2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlPieChart2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlBarChart2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlCumAcres2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlSummary2016').insertBefore('#content');
                        $('#cdlLandClass2016').insertAfter('#content');
                        $('#cdlPieChart2016').insertAfter('#cdlLandClass2016');
                        $('#cdlBarChart2016').insertAfter('#cdlPieChart2016');
                        $('#cdlCumAcres2016').insertAfter('#cdlBarChart2016');
                        $('#cdlDataTable2016').insertAfter('#cdlCumAcres2016');
                        dataButton = 3;

                        Highcharts.charts.forEach(function(chart) {
                            chart.reflow();
                        });
                    } else if (dataButton == 1 & viewButton == 2) {
                        $('#cdlMapToggle').hide();
                        $('#cdlMapToggle2016').show();
                        $('#collapseTwo').addClass('collapse');
                        $('#collapseThree').addClass('collapse');
                        $('#collapseFour').addClass('collapse');
                        $('#collapseFive').addClass('collapse');
                        $('#collapseSix').addClass('collapse');
                        $('#cdlSummary').toggleClass('col-md-4 col-md-12');
                        $('#cdlLandClass').toggleClass('col-md-4 col-md-12');
                        $('#cdlPieChart').toggleClass('col-md-4 col-md-12');
                        $('#cdlBarChart').toggleClass('col-md-4 col-md-12');
                        $('#cdlCumAcres').toggleClass('col-md-4 col-md-12');
                        $('#cdlSummary').appendTo('#sidebar');
                        $('#cdlLandClass').insertAfter('#cdlSummary');
                        $('#cdlCumAcres').insertAfter('#cdlLandClass');
                        $('#cdlPieChart').insertAfter('#cdlCumAcres');
                        $('#cdlBarChart').insertAfter('#cdlPieChart');
                        $('#cdlDataTable').insertAfter('#cdlBarChart');
                        $('#collapseFourteen').removeClass('collapse');
                        $('#collapseFifteen').removeClass('collapse');
                        $('#collapseSixteen').removeClass('collapse');
                        $('#collapseSeventeen').removeClass('collapse');
                        $('#collapseEighteen').removeClass('collapse');
                        $('#cdlSummary2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlLandClass2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlPieChart2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlBarChart2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlCumAcres2016').toggleClass('col-md-12 col-md-4');
                        $('#cdlSummary2016').insertBefore('#content');
                        $('#cdlLandClass2016').insertAfter('#content');
                        $('#cdlPieChart2016').insertAfter('#cdlLandClass2016');
                        $('#cdlBarChart2016').insertAfter('#cdlPieChart2016');
                        $('#cdlCumAcres2016').insertAfter('#cdlBarChart2016');
                        $('#cdlDataTable2016').insertAfter('#cdlCumAcres2016');
                        dataButton = 3;

                        Highcharts.charts.forEach(function(chart) {
                            chart.reflow();
                        });
                    }


                });

                $(".cdlData").click(function() {
                    if (dataButton == 2 & viewButton == 1 & sidebarButton == 1) {
                        $('#sidebar').show();
                        $('#sidebarGap').hide();
                        $('#cdlToggle').show();
                        $('#gapToggle').hide();
                        dataButton = 1;
                    } else if (dataButton == 3 & viewButton == 1 & sidebarButton == 1) {
                        $('#sidebar').show();
                        $('#sidebar2016').hide();
                        $('#cdlToggle').show();
                        $('#cdlToggle2016').hide();
                        dataButton = 1;
                    } else if (dataButton == 2 & viewButton == 2) {
                        $('#gapMapToggle').hide();
                        $('#cdlMapToggle').show();
                        $('#collapseEight').addClass('collapse');
                        $('#collapseNine').addClass('collapse');
                        $('#collapseTen').addClass('collapse');
                        $('#collapseEleven').addClass('collapse');
                        $('#collapseTwelve').addClass('collapse');
                        $('#gapSummary').toggleClass('col-md-4 col-md-12');
                        $('#gapLandClass').toggleClass('col-md-4 col-md-12');
                        $('#gapPieChart').toggleClass('col-md-4 col-md-12');
                        $('#gapBarChart').toggleClass('col-md-4 col-md-12');
                        $('#gapCumAcres').toggleClass('col-md-4 col-md-12');
                        $('#gapSummary').appendTo('#sidebarGap');
                        $('#gapLandClass').insertAfter('#gapSummary');
                        $('#gapCumAcres').insertAfter('#gapLandClass');
                        $('#gapPieChart').insertAfter('#gapCumAcres');
                        $('#gapBarChart').insertAfter('#gapPieChart');
                        $('#gapDataTable').insertAfter('#gapBarChart');
                        $('#collapseTwo').removeClass('collapse');
                        $('#collapseThree').removeClass('collapse');
                        $('#collapseFour').removeClass('collapse');
                        $('#collapseFive').removeClass('collapse');
                        $('#collapseSix').removeClass('collapse');
                        $('#cdlSummary').toggleClass('col-md-12 col-md-4');
                        $('#cdlLandClass').toggleClass('col-md-12 col-md-4');
                        $('#cdlPieChart').toggleClass('col-md-12 col-md-4');
                        $('#cdlBarChart').toggleClass('col-md-12 col-md-4');
                        $('#cdlCumAcres').toggleClass('col-md-12 col-md-4');
                        $('#cdlSummary').insertBefore('#content');
                        $('#cdlLandClass').insertAfter('#content');
                        $('#cdlPieChart').insertAfter('#cdlLandClass');
                        $('#cdlBarChart').insertAfter('#cdlPieChart');
                        $('#cdlCumAcres').insertAfter('#cdlBarChart');
                        $('#cdlDataTable').insertAfter('#cdlCumAcres');
                        dataButton = 1;

                        Highcharts.charts.forEach(function(chart) {
                            chart.reflow();
                        });
                    } else if (dataButton == 3 & viewButton == 2) {
                        $('#cdlMapToggle2016').hide();
                        $('#cdlMapToggle').show();
                        $('#collapseFourteen').addClass('collapse');
                        $('#collapseFifteen').addClass('collapse');
                        $('#collapseSixteen').addClass('collapse');
                        $('#collapseSeventeen').addClass('collapse');
                        $('#collapseEighteen').addClass('collapse');
                        $('#cdlSummary2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlLandClass2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlPieChart2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlBarChart2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlCumAcres2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlSummary2016').appendTo('#sidebar2016');
                        $('#cdlLandClass2016').insertAfter('#cdlSummary2016');
                        $('#cdlCumAcres2016').insertAfter('#cdlLandClass2016');
                        $('#cdlPieChart2016').insertAfter('#cdlCumAcres2016');
                        $('#cdlBarChart2016').insertAfter('#cdlPieChart2016');
                        $('#cdlDataTable2016').insertAfter('#cdlBarChart2016');
                        $('#collapseTwo').removeClass('collapse');
                        $('#collapseThree').removeClass('collapse');
                        $('#collapseFour').removeClass('collapse');
                        $('#collapseFive').removeClass('collapse');
                        $('#collapseSix').removeClass('collapse');
                        $('#cdlSummary').toggleClass('col-md-12 col-md-4');
                        $('#cdlLandClass').toggleClass('col-md-12 col-md-4');
                        $('#cdlPieChart').toggleClass('col-md-12 col-md-4');
                        $('#cdlBarChart').toggleClass('col-md-12 col-md-4');
                        $('#cdlCumAcres').toggleClass('col-md-12 col-md-4');
                        $('#cdlSummary').insertBefore('#content');
                        $('#cdlLandClass').insertAfter('#content');
                        $('#cdlPieChart').insertAfter('#cdlLandClass');
                        $('#cdlBarChart').insertAfter('#cdlPieChart');
                        $('#cdlCumAcres').insertAfter('#cdlBarChart');
                        $('#cdlDataTable').insertAfter('#cdlCumAcres');
                        dataButton = 1;

                        Highcharts.charts.forEach(function(chart) {
                            chart.reflow();
                        });
                    }


                });

                $(".gapData").click(function() {
                    if (dataButton == 1 & viewButton == 1 & sidebarButton == 1) {
                        $('#sidebar').hide();
                        $('#sidebarGap').show();
                        $('#cdlToggle').hide();
                        $('#gapToggle').show();
                        dataButton = 2;
                    } else if (dataButton == 3 & viewButton == 1 & sidebarButton == 1) {
                        $('#sidebar2016').hide();
                        $('#sidebarGap').show();
                        $('#cdlToggle2016').hide();
                        $('#gapToggle').show();
                        dataButton = 2;
                    } else if (dataButton == 1 & viewButton == 2) {
                        $('#cdlMapToggle').hide();
                        $('#gapMapToggle').show();
                        $('#collapseTwo').addClass('collapse');
                        $('#collapseThree').addClass('collapse');
                        $('#collapseFour').addClass('collapse');
                        $('#collapseFive').addClass('collapse');
                        $('#collapseSix').addClass('collapse');
                        $('#cdlSummary').toggleClass('col-md-4 col-md-12');
                        $('#cdlLandClass').toggleClass('col-md-4 col-md-12');
                        $('#cdlPieChart').toggleClass('col-md-4 col-md-12');
                        $('#cdlBarChart').toggleClass('col-md-4 col-md-12');
                        $('#cdlCumAcres').toggleClass('col-md-4 col-md-12');
                        $('#cdlSummary').appendTo('#sidebar');
                        $('#cdlLandClass').insertAfter('#cdlSummary');
                        $('#cdlCumAcres').insertAfter('#cdlLandClass');
                        $('#cdlPieChart').insertAfter('#cdlCumAcres');
                        $('#cdlBarChart').insertAfter('#cdlPieChart');
                        $('#cdlDataTable').insertAfter('#cdlBarChart');
                        $('#collapseEight').removeClass('collapse');
                        $('#collapseNine').removeClass('collapse');
                        $('#collapseTen').removeClass('collapse');
                        $('#collapseEleven').removeClass('collapse');
                        $('#collapseTwelve').removeClass('collapse');
                        $('#gapSummary').toggleClass('col-md-12 col-md-4');
                        $('#gapLandClass').toggleClass('col-md-12 col-md-4');
                        $('#gapPieChart').toggleClass('col-md-12 col-md-4');
                        $('#gapBarChart').toggleClass('col-md-12 col-md-4');
                        $('#gapCumAcres').toggleClass('col-md-12 col-md-4');
                        $('#gapSummary').insertBefore('#content');
                        $('#gapLandClass').insertAfter('#content');
                        $('#gapPieChart').insertAfter('#gapLandClass');
                        $('#gapBarChart').insertAfter('#gapPieChart');
                        $('#gapCumAcres').insertAfter('#gapBarChart');
                        $('#gapDataTable').insertAfter('#gapCumAcres');
                        dataButton = 2;

                        Highcharts.charts.forEach(function(chart) {
                            chart.reflow();
                        });
                    } else if (dataButton == 3 & viewButton == 2) {
                        $('#cdlMapToggle2016').hide();
                        $('#gapMapToggle').show();
                        $('#collapseFourteen').addClass('collapse');
                        $('#collapseFifteen').addClass('collapse');
                        $('#collapseSixteen').addClass('collapse');
                        $('#collapseSeventeen').addClass('collapse');
                        $('#collapseEighteen').addClass('collapse');
                        $('#cdlSummary2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlLandClass2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlPieChart2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlBarChart2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlCumAcres2016').toggleClass('col-md-4 col-md-12');
                        $('#cdlSummary2016').appendTo('#sidebar2016');
                        $('#cdlLandClass2016').insertAfter('#cdlSummary2016');
                        $('#cdlCumAcres2016').insertAfter('#cdlLandClass2016');
                        $('#cdlPieChart2016').insertAfter('#cdlCumAcres2016');
                        $('#cdlBarChart2016').insertAfter('#cdlPieChart2016');
                        $('#cdlDataTable2016').insertAfter('#cdlBarChart2016');
                        $('#collapseEight').removeClass('collapse');
                        $('#collapseNine').removeClass('collapse');
                        $('#collapseTen').removeClass('collapse');
                        $('#collapseEleven').removeClass('collapse');
                        $('#collapseTwelve').removeClass('collapse');
                        $('#gapSummary').toggleClass('col-md-12 col-md-4');
                        $('#gapLandClass').toggleClass('col-md-12 col-md-4');
                        $('#gapPieChart').toggleClass('col-md-12 col-md-4');
                        $('#gapBarChart').toggleClass('col-md-12 col-md-4');
                        $('#gapCumAcres').toggleClass('col-md-12 col-md-4');
                        $('#gapSummary').insertBefore('#content');
                        $('#gapLandClass').insertAfter('#content');
                        $('#gapPieChart').insertAfter('#gapLandClass');
                        $('#gapBarChart').insertAfter('#gapPieChart');
                        $('#gapCumAcres').insertAfter('#gapBarChart');
                        $('#gapDataTable').insertAfter('#gapCumAcres');
                        dataButton = 2;

                        Highcharts.charts.forEach(function(chart) {
                            chart.reflow();
                        });
                    }

                });

                $("#mapNav").click(function() {
                    setTimeout(function(){$("#mapNav").removeClass("collapsed")}, 100);
                })

                $(".toggle-layers").click(function() {
                    $(this).text(function(i, text) {
                        return text === "Hide Layers" ? "Show Layers" : "Hide Layers";
                    });
                    $(".esri-layer-list").toggle();

                });

                $(".toggle-legend").click(function() {
                    $(this).text(function(i, text) {
                        return text === "Show Legend" ? "Hide Legend" : "Show Legend";
                    });
                    $(".esri-legend").toggle();
                    formatLegend();

                });

                $(".toggle-sidebar").click(function() {
                    $(this).text(function(i, text) {
                        return text === "Hide Sidebar" ? "Show Sidebar" : "Hide Sidebar";
                    });
                    $("#sidebar").toggleClass("collapsed");
                    $("#sidebar2016").toggleClass("collapsed");
                    $("#sidebarGap").toggleClass("collapsed");
                    $("#content").toggleClass("col-md-12 col-md-push-5");

                    if(sidebarButton == 1){
                        $("#sidebar").hide();
                        $("#sidebar2016").hide();
                        $("#sidebarGap").hide();
                        sidebarButton = 2;
                    } else {
                        if (dataButton == 1){
                            $("#sidebar").show();
                        } else if (dataButton == 2){
                            $("#sidebarGap").show();
                        } else {
                            ("#sidebar2016").show();
                        }
                        sidebarButton = 1;
                    }

                    return false;
                });

                $(".toggle-cdl").click(function() {
                    $('#sidebar').hide();
                    $('#sidebarToggle').hide();
                    $('#cdlToggle').hide();
                    $('#cdlMapToggle').show();
                    $('#cdlMap').show();
                    $('#content').removeClass();
                    $('#content').addClass('col-md-4 card-mb-2');
                    $('#collapseTwo').removeClass('collapse');
                    $('#collapseThree').removeClass('collapse');
                    $('#collapseFour').removeClass('collapse');
                    $('#collapseFive').removeClass('collapse');
                    $('#collapseSix').removeClass('collapse');
                    $('#cdlSummary').toggleClass('col-md-12 col-md-4');
                    $('#cdlLandClass').toggleClass('col-md-12 col-md-4');
                    $('#cdlPieChart').toggleClass('col-md-12 col-md-4');
                    $('#cdlBarChart').toggleClass('col-md-12 col-md-4');
                    $('#cdlCumAcres').toggleClass('col-md-12 col-md-4');
                    $('#cdlSummary').insertBefore('#content');
                    $('#cdlLandClass').insertAfter('#content');
                    $('#cdlPieChart').insertAfter('#cdlLandClass');
                    $('#cdlBarChart').insertAfter('#cdlPieChart');
                    $('#cdlCumAcres').insertAfter('#cdlBarChart');
                    $('#cdlDataTable').insertAfter('#cdlCumAcres');

                    viewButton = 2;
                    //divHeight2();
                    setTimeout(zoomCounty, 500);

                    Highcharts.charts.forEach(function(chart) {
                        chart.reflow();
                    });

                });

                $(".toggle-cdl2016").click(function() {
                    $('#sidebar2016').hide();
                    $('#sidebarToggle').hide();
                    $('#cdlToggle2016').hide();
                    $('#cdlMapToggle2016').show();
                    $('#cdlMap2016').show();
                    $('#content').removeClass();
                    $('#content').addClass('col-md-4 card-mb-2');
                    $('#collapseFourteen').removeClass('collapse');
                    $('#collapseFifteen').removeClass('collapse');
                    $('#collapseSixteen').removeClass('collapse');
                    $('#collapseSeventeen').removeClass('collapse');
                    $('#collapseEighteen').removeClass('collapse');
                    $('#cdlSummary2016').toggleClass('col-md-12 col-md-4');
                    $('#cdlLandClass2016').toggleClass('col-md-12 col-md-4');
                    $('#cdlPieChart2016').toggleClass('col-md-12 col-md-4');
                    $('#cdlBarChart2016').toggleClass('col-md-12 col-md-4');
                    $('#cdlCumAcres2016').toggleClass('col-md-12 col-md-4');
                    $('#cdlSummary2016').insertBefore('#content');
                    $('#cdlLandClass2016').insertAfter('#content');
                    $('#cdlPieChart2016').insertAfter('#cdlLandClass2016');
                    $('#cdlBarChart2016').insertAfter('#cdlPieChart2016');
                    $('#cdlCumAcres2016').insertAfter('#cdlBarChart2016');
                    $('#cdlDataTable2016').insertAfter('#cdlCumAcres2016');

                    viewButton = 2;
                    //divHeight2();
                    setTimeout(zoomCounty, 500);

                    Highcharts.charts.forEach(function(chart) {
                        chart.reflow();
                    });

                });

                $(".toggle-gap").click(function() {
                    $('#sidebarGap').hide();
                    $('#sidebarToggle').hide();
                    $('#gapToggle').hide();
                    $('#gapMapToggle').show();
                    $('#gapMap').show();
                    $('#content').removeClass();
                    $('#content').addClass('col-md-4 card-mb-2');
                    $('#collapseEight').removeClass('collapse');
                    $('#collapseNine').removeClass('collapse');
                    $('#collapseTen').removeClass('collapse');
                    $('#collapseEleven').removeClass('collapse');
                    $('#collapseTwelve').removeClass('collapse');
                    $('#gapSummary').toggleClass('col-md-12 col-md-4');
                    $('#gapLandClass').toggleClass('col-md-12 col-md-4');
                    $('#gapPieChart').toggleClass('col-md-12 col-md-4');
                    $('#gapBarChart').toggleClass('col-md-12 col-md-4');
                    $('#gapCumAcres').toggleClass('col-md-12 col-md-4');
                    $('#gapSummary').insertBefore('#content');
                    $('#gapLandClass').insertAfter('#content');
                    $('#gapPieChart').insertAfter('#gapLandClass');
                    $('#gapBarChart').insertAfter('#gapPieChart');
                    $('#gapCumAcres').insertAfter('#gapBarChart');
                    $('#gapDataTable').insertAfter('#gapCumAcres');

                    viewButton = 2;
                    //divHeight2();
                    setTimeout(zoomCounty, 500);

                    Highcharts.charts.forEach(function(chart) {
                        chart.reflow();
                    });

                });

                $(".toggle-cdl-map").click(function() {
                    $('#sidebar').show();
                    $('#sidebarToggle').show();
                    $('#cdlToggle').show();
                    $('#cdlMapToggle').hide();
                    $('#cdlMap').hide();
                    $('#content').insertBefore('#sidebar');
                    $('#collapseTwo').addClass('collapse');
                    $('#collapseThree').addClass('collapse');
                    $('#collapseFour').addClass('collapse');
                    $('#collapseFive').addClass('collapse');
                    $('#collapseSix').addClass('collapse');
                    $('#content').removeClass();
                    $('#content').addClass('col-xs-12 col-md-push-5 col-md-7 card mb-2');
                    $('#cdlSummary').toggleClass('col-md-4 col-md-12');
                    $('#cdlLandClass').toggleClass('col-md-4 col-md-12');
                    $('#cdlPieChart').toggleClass('col-md-4 col-md-12');
                    $('#cdlBarChart').toggleClass('col-md-4 col-md-12');
                    $('#cdlCumAcres').toggleClass('col-md-4 col-md-12');
                    $('#cdlSummary').appendTo('#sidebar');
                    $('#cdlLandClass').insertAfter('#cdlSummary');
                    $('#cdlCumAcres').insertAfter('#cdlLandClass');
                    $('#cdlPieChart').insertAfter('#cdlCumAcres');
                    $('#cdlBarChart').insertAfter('#cdlPieChart');
                    $('#cdlDataTable').insertAfter('#cdlBarChart');

                    viewButton = 1;
                    //divHeight();
                    setTimeout(zoomCounty, 1000);

                    Highcharts.charts.forEach(function(chart) {
                        chart.reflow();
                    });
                });

                $(".toggle-cdl-map2016").click(function() {
                    $('#sidebar2016').show();
                    $('#sidebarToggle').show();
                    $('#cdlToggle2016').show();
                    $('#cdlMapToggle2016').hide();
                    $('#cdlMap2016').hide();
                    $('#content').insertBefore('#sidebar');
                    $('#collapseFourteen').addClass('collapse');
                    $('#collapseFifteen').addClass('collapse');
                    $('#collapseSixteen').addClass('collapse');
                    $('#collapseSeventeen').addClass('collapse');
                    $('#collapseEighteen').addClass('collapse');
                    $('#content').removeClass();
                    $('#content').addClass('col-xs-12 col-md-push-5 col-md-7 card mb-2');
                    $('#cdlSummary2016').toggleClass('col-md-4 col-md-12');
                    $('#cdlLandClass2016').toggleClass('col-md-4 col-md-12');
                    $('#cdlPieChart2016').toggleClass('col-md-4 col-md-12');
                    $('#cdlBarChart2016').toggleClass('col-md-4 col-md-12');
                    $('#cdlCumAcres2016').toggleClass('col-md-4 col-md-12');
                    $('#cdlSummary2016').appendTo('#sidebar2016');
                    $('#cdlLandClass2016').insertAfter('#cdlSummary2016');
                    $('#cdlCumAcres2016').insertAfter('#cdlLandClass2016');
                    $('#cdlPieChart2016').insertAfter('#cdlCumAcres2016');
                    $('#cdlBarChart2016').insertAfter('#cdlPieChart2016');
                    $('#cdlDataTable2016').insertAfter('#cdlBarChart2016');

                    viewButton = 1;
                    //divHeight();
                    setTimeout(zoomCounty, 1000);

                    Highcharts.charts.forEach(function(chart) {
                        chart.reflow();
                    });
                });

                $(".toggle-gap-map").click(function() {
                    $('#sidebarGap').show();
                    $('#sidebarToggle').show();
                    $('#gapToggle').show();
                    $('#gapMapToggle').hide();
                    $('#gapMap').hide();
                    $('#content').insertBefore('#sidebar');
                    $('#collapseEight').addClass('collapse');
                    $('#collapseNine').addClass('collapse');
                    $('#collapseTen').addClass('collapse');
                    $('#collapseEleven').addClass('collapse');
                    $('#collapseTwelve').addClass('collapse');
                    $('#content').removeClass();
                    $('#content').addClass('col-xs-12 col-md-push-5 col-md-7 card mb-2');
                    $('#gapSummary').toggleClass('col-md-4 col-md-12');
                    $('#gapLandClass').toggleClass('col-md-4 col-md-12');
                    $('#gapPieChart').toggleClass('col-md-4 col-md-12');
                    $('#gapBarChart').toggleClass('col-md-4 col-md-12');
                    $('#gapCumAcres').toggleClass('col-md-4 col-md-12');
                    $('#gapSummary').appendTo('#sidebarGap');
                    $('#gapLandClass').insertAfter('#gapSummary');
                    $('#gapCumAcres').insertAfter('#gapLandClass');
                    $('#gapPieChart').insertAfter('#gapCumAcres');
                    $('#gapBarChart').insertAfter('#gapPieChart');
                    $('#gapDataTable').insertAfter('#gapBarChart');

                    viewButton = 1;
                    //divHeight();
                    setTimeout(zoomCounty, 1000);

                    Highcharts.charts.forEach(function(chart) {
                        chart.reflow();
                    });
                });

                $(".save-table").click(function() {
                    dataType = countyName + "Crop_Summary_Data";
                    tableExport();
                });

                $(".save-table2").click(function() {
                    dataType = countyName + "FR_Summary_Data";
                    tableExport2();
                });

                $('#tutorial').click(function (){
                    introJs().setOption('showProgress', true).start();
                });
            });

        </script>

        <script>
            //$('body').prepend('<div style="" id="loadingDiv"><div class="loader">Loading...</div></div>');
            $(window).on('load', function(){
                removeLoader(); //wait for page load PLUS two seconds.


            });
            function removeLoader(){
                $( "#loadingDiv" ).fadeOut(100, function() {
                    // fadeOut complete. Remove the loading div
                    $( "#loadingDiv" ).remove(); //makes page more lightweight
                });
            }
        </script>

    </body>

</html>
