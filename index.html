<!DOCTYPE html>
<html>

<head>
    <!-- Site made with Mobirise Website Builder v3.12.1, https://mobirise.com -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="Mobirise v3.12.1, mobirise.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon">
    <meta name="description" content="">

    <title>The Wildfire Fuel Mapper</title>

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto:700,400&amp;subset=cyrillic,latin,greek,vietnamese">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/animate.css/animate.min.css">
    <link rel="stylesheet" href="assets/mobirise/css/style.css">
    <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
    <style>
        .mbr-after-navbar:before {
            content: "";
            display: block;
            height: 0px;
        }

        .mbr-box__container {
            height: 60%;
        }

        #viewDiv {
            padding: 0;
            margin: 0;
            height: 50vh;
            width: 60%;
        }
    </style>
</head>

<body>
    <section class="mbr-navbar mbr-navbar--freeze mbr-navbar--absolute mbr-navbar--sticky mbr-navbar--auto-collapse"
        id="ext_menu-0">
        <div class="mbr-navbar__section mbr-section">
            <div class="mbr-section__container container">
                <div class="mbr-navbar__container">
                    <div class="mbr-navbar__column mbr-navbar__column--s mbr-navbar__brand">
                        <span class="mbr-navbar__brand-link mbr-brand mbr-brand--inline">
                            <span class="mbr-brand__logo"><a href="index.html"><img src="assets/images/logo.png"
                                        class="mbr-navbar__brand-img mbr-brand__img" alt="Mobirise"></a></span>
                            <!--<span class="mbr-brand__name"><a href="index.html" class="mbr-brand__name text-white">Wildfire Fuel Mapper</a></span>-->
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="home" class="engine"><a rel="external" href="https://mobirise.com">Mobirise</a></section>
    <section
        class="mbr-box mbr-section mbr-section--relative mbr-section--fixed-size mbr-section--full-height mbr-section--bg-adapted"
        id="header2-2" style="background-image: url(assets/images/background.jpg);  background-position: bottom;">
        <div class="mbr-box__magnet mbr-box__magnet--sm-padding mbr-box__magnet--center-left mbr-after-navbar">

            <div class="mbr-box__container mbr-section__container container">
                <div class="mbr-box mbr-box--stretched">
                    <div class="mbr-box__magnet mbr-box__magnet--center-left">
                        <div class="row">
                            <div class="col-sm-6 col-sm-offset-6">
                                <div class="mbr-hero animated fadeInUp">
                                    <h1 class="mbr-hero__text"
                                        style="text-shadow: 0 0 0.2em #000000, 0 0 0.2em #000000">Wildfire Fuel Mapper
                                    </h1>
                                    <h1 class="mbr-hero__subtext"
                                        style="text-shadow: 0 0 0.2em #000000, 0 0 0.2em #000000; letter-spacing: 0px">
                                        Understand your land, reduce fuels, and protect your community</h1>
                                    <p class="mbr-hero__subtext"
                                        style="text-shadow: 0 0 0.2em #000000, 0 0 0.2em #000000"><i>Maps, resources,
                                            and information to help residents and land managers reduce fire fuel
                                            hazard.</i></p>
                                    <p class="mbr-hero__subtext"
                                        style="text-shadow: 0 0 0.2em #000000, 0 0 0.2em #000000"><i>To view information
                                            for the counties below select the county of interest</i></p>
                                </div>
                            </div>
                            <div class="col-sm-6 col-sm-offset-6 svg-container">
                                <div id="viewDiv">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <section class="mbr-section mbr-section--relative mbr-section--fixed-size" id="contacts1-5"
        style="background-color: #6d6f71;">

        <div class="mbr-section__container container">
            <div class="mbr-contacts mbr-contacts--wysiwyg row" style="padding-top: 0px; padding-bottom: 15px">
                <div style="color: white; text-align:left; width: 25%; float: left">
                    <h4>Contact Us:</h4>
                    <a class="footLink" href="mailto:slarson@ucanr.edu" target="_blank">Dr. Stephanie Larson,
                        UCCE</a><br />
                    <a class="footLink" href="mailto:khenifin@pepperwoodpreserve.org" target="_blank">Kai Henifin,
                        Pepperwood</a>
                </div>
                <img src="assets/images/LogoPanel_Wide.png" height="75px" style="float:right; margin-top: 10px">
                <div style="color: white; width: 50%; float: right; margin-top: 10px">
                    <p>This project is a collaboration between <a class="footLink" href="http://ucanr.edu/"
                            target="_blank">University of California Agriculture and Natural Resources</a>, <a
                            class="footLink" href="https://www.pepperwoodpreserve.org/" target="_blank">Pepperwood</a>
                        and <a class="footLink" href="https://tukmangeospatial.com/" target="_blank">Tukman
                            Geospatial</a>, with support from <a class="footLink"
                            href="https://www.pge.com/en_US/about-pge/about-pge.page" target="_blank">PG&E</a>, the <a
                            class="footLink" href="http://www.fltfoundation.org/index.html" target="_blank">Thornton
                            Foundation</a>, <a class="footLink" href="https://www.fire.ca.gov/" target="_blank">CAL
                            FIRE</a> and <a class="footLink" href="https://napafirewise.org/" target="_blank">Napa
                            Firewise Foundation</a>.</p>

                </div>

            </div>
        </div>
    </section>

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-99560076-15', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="assets/web/assets/jquery/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/smooth-scroll/smooth-scroll.js"></script>
    <script src="assets/jarallax/jarallax.js"></script>
    <!--[if lte IE 9]>
<script src="assets/jquery-placeholder/jquery.placeholder.min.js"></script>
<![endif]-->
    <script src="assets/mobirise/js/script.js"></script>
    <script src="assets/formoid/formoid.min.js"></script>
    <script src="https://js.arcgis.com/4.25/"></script>

    <script>
        var countyName,
            view
        require(["esri/config", "esri/WebMap", "esri/Map", "esri/views/MapView", "esri/layers/FeatureLayer",
            "esri/core/reactiveUtils", "esri/Graphic", "esri/geometry/Point", "esri/geometry/Polygon",
            "esri/widgets/Legend", "esri/widgets/Home", "esri/Viewpoint", "esri/rest/support/Query"
        ], function (
            esriConfig, WebMap, Map, MapView, FeatureLayer, reactiveUtils, Graphic, Point, Polygon, Legend,
            Home, Viewpoint, Query) {

            esriConfig.apiKey =
                "AAPK81f0d351c3594c2b8cd4832bde9a5807jQ1T-g3D3qxEvv_NMG7d29O7RjEFW3zUK5A325tz4uSUmfCc2C5GJ8NOi4-35lN-";

            const webmap = new WebMap({
                portalItem: {
                    // autocasts as new PortalItem()
                    id: "cfb19b5578e4407b816df9bf4e9eeaa9"
                }
            });

            view = new MapView({
                map: webmap,
                container: "viewDiv",
                constraints: {
                    snapToZoom: false
                }
            });

            view.ui.remove(["attribution", "zoom"]);

            function stopEvtPropagation(event) {
                event.stopPropagation();
            }

            // disable mouse wheel scroll zooming on the view
            view.on("mouse-wheel", stopEvtPropagation);

            // disable zooming via double-click on the view
            view.on("double-click", stopEvtPropagation);

            // disable zooming out via double-click + Control on the view
            view.on("double-click", ["Control"], stopEvtPropagation);

            // disables pinch-zoom and panning on the view
            view.on("drag", stopEvtPropagation);

            // disable the view's zoom box to prevent the Shift + drag
            // and Shift + Control + drag zoom gestures.
            view.on("drag", ["Shift"], stopEvtPropagation);
            view.on("drag", ["Shift", "Control"], stopEvtPropagation);

            // prevents zooming with the + and - keys
            view.on("key-down", (event) => {
                const prohibitedKeys = [
                    "+",
                    "-",
                    "Shift",
                    "_",
                    "=",
                    "ArrowUp",
                    "ArrowDown",
                    "ArrowRight",
                    "ArrowLeft"
                ];
                const keyPressed = event.key;
                if (prohibitedKeys.indexOf(keyPressed) !== -1) {
                    event.stopPropagation();
                }
            });

            reactiveUtils.whenOnce(() => !view?.updating).then( () => {
                    console.log(view.layerViews.items[0].layer.fullExtent);
                    view.layerViews.items[0].layer.queryExtent().then(function (response) {
                // go to the extent of all the graphics in the layer view
                view.goTo(response.extent);
            });
            })
        

            view.on("click", (event) => {
                // only include graphics from hurricanesLayer in the hitTest
                const opts = {
                    include: view.layerViews.items[0].layer
                }
                let symbol = {
                    type: "simple-fill", // autocasts as new SimpleFillSymbol()
                    color: [0, 255, 255, 0.2],
                    style: "solid",
                    outline: { // autocasts as new SimpleLineSymbol()
                        color: [0, 255, 255, 1],
                        width: 1
                    }
                };
                view.hitTest(event, opts).then((response) => {
                    // check if a feature is returned from the hurricanesLayer
                    if (response.results.length) {
                        const graphic = response.results[0].graphic;
                        graphic.symbol = symbol
                        countyName = graphic.attributes.name

                        view.graphics.removeAll()
                        view.graphics.add(graphic)

                        location.href = "county_IDX.html?id=" + countyName
                    }
                });
            });
        });
    </script>


</body>

</html>